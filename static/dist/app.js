!function(e){function t(t){for(var n,c,i=t[0],l=t[1],u=t[2],f=0,p=[];f<i.length;f++)c=i[f],Object.prototype.hasOwnProperty.call(a,c)&&a[c]&&p.push(a[c][0]),a[c]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);for(s&&s(t);p.length;)p.shift()();return o.push.apply(o,u||[]),r()}function r(){for(var e,t=0;t<o.length;t++){for(var r=o[t],n=!0,i=1;i<r.length;i++){var l=r[i];0!==a[l]&&(n=!1)}n&&(o.splice(t--,1),e=c(c.s=r[0]))}return e}var n={},a={0:0},o=[];function c(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,c),r.l=!0,r.exports}c.m=e,c.c=n,c.d=function(e,t,r){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},c.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(c.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)c.d(r,n,function(t){return e[t]}.bind(null,n));return r},c.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="";var i=window.webpackJsonp=window.webpackJsonp||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var u=0;u<i.length;u++)t(i[u]);var s=l;o.push([256,1]),r()}({256:function(e,t,r){r(257),e.exports=r(486)},486:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),o=r(17),c=r(55),i=r(101),l=r(73),u=r(63),s=r(237);function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){m(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function m(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var b={placeholder:"Поиск...",onSearch:null,value:""},d={text:"Добавить",onClick:null},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{addBtn:d,search:b,title:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"header:set":var r=t.payload,n=r.search,a=r.title,o=r.addBtn;return p({},e,{search:p({},b,{},n||{}),addBtn:p({},d,{},o||{}),title:a||null});case"header:setSearchValue":return p({},e,{search:p({},e.search,{value:t.payload})});default:return e}};function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){O(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function O(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{users:[],total:0,isLoading:!1,filters:{limit:10,page:1}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"users:setFilters":return g({},e,{filters:t.filters});case"users:receive":return g({},e,{users:t.users.results,total:t.users.total});default:return e}};function j(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?j(Object(r),!0).forEach((function(t){P(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function P(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{publishers:[],total:0,isLoading:!1,filters:{limit:10,page:1}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"publishers:setFilters":return w({},e,{filters:t.filters});case"publishers:receive":return w({},e,{publishers:t.publishers.results,total:t.publishers.total});default:return e}};function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function C(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k(Object(r),!0).forEach((function(t){S(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function S(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{content:[],total:0,isLoading:!1,filters:{limit:10,page:1}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"content:setFilters":return C({},e,{filters:t.filters});case"content:receive":return C({},e,{content:t.content.results,total:t.content.total});default:return e}},R=Object(u.c)({headerReducer:h,usersReducer:v,publishersReducer:E,contentReducer:x}),D=r(11),F=r(97),N=r.n(F);function _(e){throw 403===e.response.status&&(window.location="/"),e}var T=function(e,t){return N.a.get(e,{params:t}).catch(_)},q=function(e,t,r){return N.a.post(e,t,{headers:r}).catch(_)},I=function(e,t,r){return N.a.put(e,t,{headers:r}).catch(_)},L=function(e,t){return N.a.delete(e,{params:t}).catch(_)},A=function(){return{type:"users:fetch"}};function B(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var W=regeneratorRuntime.mark(z),U=regeneratorRuntime.mark(K),V=regeneratorRuntime.mark(Q),M=regeneratorRuntime.mark(X);function H(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function G(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?H(Object(r),!0).forEach((function(t){J(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):H(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function J(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function z(){var e,t;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Object(D.d)((function(e){var t=e.usersReducer.filters,r=e.headerReducer.search;return G({},t,{},r.value?{query:r.value}:{})}));case 3:return e=r.sent,r.next=6,Object(D.b)(T,"/users/",e);case 6:return t=r.sent,r.next=9,Object(D.c)({type:"users:receive",users:t.data});case 9:r.next=14;break;case 11:r.prev=11,r.t0=r.catch(0),console.error(r.t0);case 14:case"end":return r.stop()}}),W,null,[[0,11]])}function K(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(D.b)(L,"/users/".concat(e.payload));case 3:return t.next=5,Object(D.c)({type:"users:fetch"});case 5:t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0);case 10:case"end":return t.stop()}}),U,null,[[0,7]])}function Q(e){var t,r,n,a;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(t=e.payload,r=t.id,n=B(t,["id"]),a=e.callback,o.prev=1,!r){o.next=7;break}return o.next=5,Object(D.b)(I,"/users/".concat(r,"/"),n);case 5:o.next=9;break;case 7:return o.next=9,Object(D.b)(q,"/users/",n);case 9:return o.next=11,Object(D.c)({type:"users:fetch"});case 11:a&&a(),o.next=17;break;case 14:o.prev=14,o.t0=o.catch(1),console.error(o.t0);case 17:case"end":return o.stop()}}),V,null,[[1,14]])}function X(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(D.a)([Object(D.f)("users:fetch",z),Object(D.f)("users:delete",K),Object(D.f)("users:mutate",Q)]);case 2:case"end":return e.stop()}}),M)}var Y=regeneratorRuntime.mark(re),Z=regeneratorRuntime.mark(ne),$=regeneratorRuntime.mark(ae),ee=regeneratorRuntime.mark(oe),te=regeneratorRuntime.mark(ce);function re(){var e,t;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(D.d)((function(e){return e.publishersReducer.filters}));case 2:return e=r.sent,r.next=5,Object(D.b)(T,"/publishers/",e);case 5:return t=r.sent,r.next=8,Object(D.c)({type:"publishers:receive",publishers:t.data});case 8:case"end":return r.stop()}}),Y)}function ne(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(D.b)(q,"/publishers/",e.formData);case 2:e.callback&&e.callback();case 3:case"end":return t.stop()}}),Z)}function ae(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(D.b)(I,"/publishers/".concat(e.publisherId,"/"),e.formData);case 2:e.callback&&e.callback();case 3:case"end":return t.stop()}}),$)}function oe(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(D.b)(L,"/publishers/".concat(e.publisherId,"/"));case 2:e.callback&&e.callback();case 3:case"end":return t.stop()}}),ee)}function ce(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(D.a)([Object(D.f)("publishers:fetch",re),Object(D.f)("publishers:add",ne),Object(D.f)("publishers:update",ae),Object(D.e)("publishers:delete",oe)]);case 2:case"end":return e.stop()}}),te)}var ie=regeneratorRuntime.mark(pe),le=regeneratorRuntime.mark(me),ue=regeneratorRuntime.mark(be),se=regeneratorRuntime.mark(de),fe=regeneratorRuntime.mark(he);function pe(){var e,t;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(D.d)((function(e){return e.contentReducer.filters}));case 2:return e=r.sent,r.next=5,Object(D.b)(T,"/content/",e);case 5:return t=r.sent,r.next=8,Object(D.c)({type:"content:receive",content:t.data});case 8:case"end":return r.stop()}}),ie)}function me(e){var t;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t={"Content-Type":"multipart/form-data"},r.next=3,Object(D.b)(q,"/content/",e.formData,t);case 3:e.callback&&e.callback();case 4:case"end":return r.stop()}}),le)}function be(e){var t;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t={"Content-Type":"multipart/form-data"},r.next=3,Object(D.b)(I,"/content/".concat(e.contentId,"/"),e.formData,t);case 3:e.callback&&e.callback();case 4:case"end":return r.stop()}}),ue)}function de(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(D.b)(L,"/content/".concat(e.contentId,"/"));case 2:e.callback&&e.callback();case 3:case"end":return t.stop()}}),se)}function he(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(D.a)([Object(D.f)("content:fetch",pe),Object(D.f)("content:add",me),Object(D.f)("content:update",be),Object(D.e)("content:delete",de)]);case 2:case"end":return e.stop()}}),fe)}var ye=r(543),ge=r(544),Oe=r(532),ve=r(533),je=r(534),we=r(225),Pe=r.n(we),Ee=r(530),ke=r(102),Ce=r(557),Se=r(538),xe=r(229),Re=r.n(xe),De=r(230),Fe=r.n(De),Ne=r(226),_e=r.n(Ne),Te=r(223);function qe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Ie=Object(Te.a)((function(e){var t;return{appBar:(t={backgroundColor:"white"},qe(t,e.breakpoints.up("sm"),{width:"calc(100% - 200px)",marginLeft:200}),qe(t,"color","black"),qe(t,"& > div",{justifyContent:"flex-end"}),t),menuButton:qe({},e.breakpoints.up("sm"),{display:"none"}),addButton:{marginLeft:e.spacing(3),fontWeight:"bold"},grow:{flexGrow:1},search:{width:270,marginRight:e.spacing(3)},searchInputRoot:{padding:"0 ".concat(e.spacing(1),"px")},searchInput:{padding:"".concat(e.spacing(1),"px ").concat(e.spacing(2),"px")},searchClose:{cursor:"pointer"}}}));function Le(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ae(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Be={setSearchValue:function(e){return{type:"header:setSearchValue",payload:e}}},We=Object(c.b)((function(e){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Le(Object(r),!0).forEach((function(t){Ae(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Le(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e.headerReducer)}),Be)((function(e){var t=e.title,r=e.search,n=e.addBtn,o=e.setSearchValue,c=e.handleDrawerToggle,i=Ie();return a.a.createElement(Ee.a,{position:"fixed",className:i.appBar},a.a.createElement(Oe.a,null,a.a.createElement(ve.a,{onClick:c,className:i.menuButton},a.a.createElement(Pe.a,null)),a.a.createElement(ke.a,{variant:"h6",noWrap:!0},t),n.onClick&&a.a.createElement(je.a,{className:i.addButton,startIcon:a.a.createElement(_e.a,null),onClick:n.onClick},n.text),a.a.createElement("div",{className:i.grow}),r.onSearch&&a.a.createElement(Ce.a,{className:i.search,value:r.value,onChange:function(e){var t=e.target.value;o(t),r.onSearch(t)},variant:"outlined",placeholder:r.placeholder,InputProps:{classes:{root:i.searchInputRoot,input:i.searchInput},startAdornment:a.a.createElement(Se.a,null,a.a.createElement(Re.a,null)),endAdornment:r.value?a.a.createElement(Se.a,null,a.a.createElement(Fe.a,{onClick:function(){o(""),r.onSearch(null)},className:i.searchClose})):null}}),a.a.createElement(je.a,{color:"primary",onClick:function(){return q("/users/logout/").then((function(){return window.location="/"}))}},"Выйти")))})),Ue=r(539),Ve=r(558),Me=r(542),He=r(537),Ge=r(487),Je=r(540),ze=r(541),Ke=r(232),Qe=r.n(Ke),Xe=r(233),Ye=r.n(Xe),Ze=r(234),$e=r.n(Ze);function et(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var tt=Object(Te.a)((function(e){var t;return{container:(t={},et(t,e.breakpoints.up("sm"),{width:200,flexShrink:0}),et(t,"position","relative"),t),logo:{fontWeight:"bold",lineHeight:"64px"},listIcon:{color:"white"},divider:{backgroundColor:"rgba(255, 255, 255, 0.5)"},navLink:{color:"white",textDecoration:"none","&.active > div":{borderLeftColor:"white",borderLeftWidth:3,borderLeftStyle:"solid",backgroundColor:"rgba(255, 255, 255, 0.1)"}},version:{position:"absolute",left:e.spacing(1),bottom:e.spacing(1),fontWeight:"bold"},paper:{width:200,backgroundColor:e.palette.primary.main,color:"white"}}}));function rt(){return(rt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function nt(e){var t=e.mobileOpen,r=e.handleDrawerToggle,n=tt(),o={classes:{paper:n.paper},children:a.a.createElement(a.a.Fragment,null,a.a.createElement(ke.a,{className:n.logo,variant:"h5",align:"center"},"InDoor"),a.a.createElement(Ue.a,{className:n.divider}),a.a.createElement(He.a,null,a.a.createElement(i.b,{to:"/users/",className:n.navLink},a.a.createElement(Ge.a,{button:!0},a.a.createElement(Je.a,null,a.a.createElement(Qe.a,{className:n.listIcon})),a.a.createElement(ze.a,{primary:"Пользователи"}))),a.a.createElement(i.b,{to:"/publishers/",className:n.navLink},a.a.createElement(Ge.a,{button:!0},a.a.createElement(Je.a,null,a.a.createElement(Ye.a,{className:n.listIcon})),a.a.createElement(ze.a,{primary:"Рекламодатели"}))),a.a.createElement(i.b,{to:"/content/",className:n.navLink},a.a.createElement(Ge.a,{button:!0},a.a.createElement(Je.a,null,a.a.createElement($e.a,{className:n.listIcon})),a.a.createElement(ze.a,{primary:"Контент"})))),a.a.createElement(ke.a,{variant:"subtitle2",className:n.version},"2.20.02.004"))};return a.a.createElement("nav",{className:n.container},a.a.createElement(Ve.a,{smUp:!0},a.a.createElement(Me.a,rt({variant:"temporary",open:t,onClose:r,ModalProps:{keepMounted:!0}},o))),a.a.createElement(Ve.a,{xsDown:!0},a.a.createElement(Me.a,rt({variant:"permanent",open:!0},o))))}var at=Object(Te.a)((function(e){return{root:{display:"flex",height:"100vh",overflow:"hidden"},pageContainer:{flexGrow:1,padding:e.spacing(3),marginTop:64},pageContent:{height:"calc(100vh - 64px - ".concat(e.spacing(6),"px)"),overflow:"auto",position:"relative"}}})),ot=r(236),ct=Object(ot.a)({typography:{fontFamily:"Officina Serif, Roboto, sans-serif"},palette:{primary:{main:"#39286c"}}});function it(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var r=[],n=!0,a=!1,o=void 0;try{for(var c,i=e[Symbol.iterator]();!(n=(c=i.next()).done)&&(r.push(c.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{n||null==i.return||i.return()}finally{if(a)throw o}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var lt=function(e){var t=e.children,r=at(),n=it(a.a.useState(!1),2),o=n[0],c=n[1],i=function(){c(!o)};return a.a.createElement(ye.a,{theme:ct},a.a.createElement(ge.a,null),a.a.createElement("div",{className:r.root},a.a.createElement(We,{handleDrawerToggle:i}),a.a.createElement(nt,{classes:r,mobileOpen:o,handleDrawerToggle:i}),a.a.createElement("main",{className:r.pageContainer},a.a.createElement("div",{className:r.pageContent},t))))},ut=r(2),st=r.n(ut),ft=r(551),pt=r(7),mt=r(235),bt=r.n(mt),dt=r(170),ht=r(546),yt=r(550),gt=r(549),Ot=r(545),vt=r(547),jt=r(559),wt=r(548),Pt=Object(Te.a)({paper:{borderRadius:5},tableContainer:{backgroundColor:"white",borderTopLeftRadius:5,borderTopRightRadius:5,maxHeight:"calc(100vh - 230px)"},headCell:{backgroundColor:"white",fontWeight:"bold"},serial:{width:100},actions:{width:200},actionBtn:{display:"block",fontWeight:"bold"}});function Et(e){var t=e.items,r=e.columns,n=e.actions,o=e.page,c=e.onPageChange,i=e.limit,l=e.onLimitChange,u=e.total,s=Pt();return a.a.createElement(dt.a,{className:s.paper},a.a.createElement(Ot.a,{className:s.tableContainer},a.a.createElement(ht.a,{stickyHeader:!0},a.a.createElement(vt.a,null,a.a.createElement(wt.a,null,a.a.createElement(gt.a,{className:bt()(s.serial,s.headCell)},"№ п/п"),r.map((function(e){return a.a.createElement(gt.a,{key:e.key,className:s.headCell},e.title)})),n&&n.length&&a.a.createElement(gt.a,{className:s.headCell},"Действия"))),a.a.createElement(yt.a,null,t.map((function(e,t){return a.a.createElement(wt.a,{hover:!0,key:e.id},a.a.createElement(gt.a,{className:s.serial},t+1),r.map((function(t){return a.a.createElement(gt.a,{key:t.key},t.getValue?t.getValue(e):e[t.key])})),n&&n.length&&a.a.createElement(gt.a,{className:s.actions},n.map((function(t){return a.a.createElement(je.a,{key:t.key,className:s.actionBtn,size:"small",color:t.color,onClick:function(){return t.onClick(e)}},t.title)}))))}))))),a.a.createElement(jt.a,{labelRowsPerPage:"Количество строк на странице:",labelDisplayedRows:function(e){var t=e.from,r=e.to,n=e.count;return"".concat(t,"-").concat(-1===r?n:r," из ").concat(-1!==n?n:"больше, чем ".concat(r))},rowsPerPageOptions:[10,25,50],component:"div",count:u,page:o-1,onChangePage:function(e,t){return c(t+1)},rowsPerPage:i,onChangeRowsPerPage:function(e){var t=e.target.value;return l(t)}}))}function kt(e){switch(e){case"Admin":return"Администратор";case"User":return"Пользователь";case"Manager":return"Менеджер"}}function Ct(e){switch(e){case"Active":return"Активен";case"Disabled":return"Неактивен";case"Deleted":return"Удален";case"Archive":return"Архивный"}}Et.propTypes={items:st.a.array,columns:st.a.arrayOf(st.a.shape({key:st.a.string,title:st.a.string,getValue:st.a.func})),actions:st.a.arrayOf(st.a.shape({key:st.a.string,title:st.a.string,onClick:st.a.func})),page:st.a.number,onPageChange:st.a.func,limit:st.a.number,onLimitChange:st.a.func,total:st.a.number};var St=[{value:"User",label:"Пользователь"},{value:"Manager",label:"Менеджер"},{value:"Admin",label:"Администратор"}],xt=[{value:"Active",label:"Активен"},{value:"Disabled",label:"Неактивен"},{value:"Deleted",label:"Удален"},{value:"Archive",label:"Архивный"}],Rt=r(488),Dt=r(552),Ft=r(553),Nt=r(554),_t=r(555);function Tt(){return(Tt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var qt=a.a.forwardRef((function(e,t){return a.a.createElement(Rt.a,Tt({direction:"up",ref:t},e))})),It=Object(Te.a)((function(e){return{content:{paddingBottom:e.spacing(4)}}}));function Lt(e){var t=e.open,r=e.title,n=e.handleClose,o=e.handleSubmit,c=e.children,i=e.isValid,l=It();return a.a.createElement(Dt.a,{fullWidth:!0,maxWidth:"sm",open:t,onClose:n,TransitionComponent:qt},a.a.createElement(Ft.a,null,r),a.a.createElement(Nt.a,{dividers:!0,className:l.content},c),a.a.createElement(_t.a,null,a.a.createElement(je.a,{onClick:n},"Отмена"),a.a.createElement(je.a,{disabled:!i,onClick:o,color:"primary"},"Сохранить")))}function At(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Bt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Wt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var r=[],n=!0,a=!1,o=void 0;try{for(var c,i=e[Symbol.iterator]();!(n=(c=i.next()).done)&&(r.push(c.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{n||null==i.return||i.return()}finally{if(a)throw o}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}Lt.propTypes={open:st.a.bool,title:st.a.string,handleClose:st.a.func,handleSubmit:st.a.func,children:st.a.node,isValid:st.a.bool};var Ut=Object(Te.a)((function(e){return{form:{"& > div:not(:last-child)":{marginBottom:e.spacing(2)}}}}));function Vt(e){var t=e.data,r=e.handleClose,n=e.handleSubmit,o=Ut(),c=t&&t.id,i=c?{name:t.name,email:t.email,role:t.role}:{},l=Wt(a.a.useState(i),2),u=l[0],s=l[1],f=function(e){var t=e.target;s(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?At(Object(r),!0).forEach((function(t){Bt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):At(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},u,Bt({},t.name,t.value)))};return a.a.createElement(Lt,{open:!0,title:c?"Редактирование пользователя ".concat(t.name):"Создание пользователя",handleClose:r,handleSubmit:function(){return n(u)},isValid:Boolean(u.name&&u.email&&(c||u.password))},a.a.createElement("form",{className:o.form},a.a.createElement(Ce.a,{fullWidth:!0,name:"name",label:"Имя",value:u.name||"",onChange:f,variant:"outlined",margin:"dense"}),a.a.createElement(Ce.a,{fullWidth:!0,name:"email",label:"Email",value:u.email||"",onChange:f,variant:"outlined",margin:"dense"}),a.a.createElement(Ce.a,{fullWidth:!0,name:"password",label:"Пароль",type:"password",value:u.password||"",onChange:f,variant:"outlined",margin:"dense"}),a.a.createElement(Ce.a,{fullWidth:!0,select:!0,name:"role",label:"Роль",value:u.role,onChange:f,variant:"outlined",margin:"dense",SelectProps:{native:!0}},St.map((function(e){return a.a.createElement("option",{key:e.value,value:e.value},e.label)})))))}function Mt(e){return(Mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ht(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Gt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Jt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Gt(Object(r),!0).forEach((function(t){$t(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Gt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function zt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Kt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Qt(e,t){return!t||"object"!==Mt(t)&&"function"!=typeof t?Yt(e):t}function Xt(e){return(Xt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Yt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Zt(e,t){return(Zt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $t(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Vt.propTypes={open:st.a.bool,data:st.a.object,handleClose:st.a.func,handleSubmit:st.a.func};var er=function(e){function t(){var e,r;zt(this,t);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return $t(Yt(r=Qt(this,(e=Xt(t)).call.apply(e,[this].concat(a)))),"state",{form:{open:!1,data:null}}),$t(Yt(r),"columns",[{key:"name",title:"Имя"},{key:"status",title:"Статус",getValue:function(e){return Ct(e.status)}},{key:"email",title:"E-mail"},{key:"role",title:"Роль",getValue:function(e){return kt(e.role)}}]),$t(Yt(r),"actions",[{key:"edit",title:"Редактировать",onClick:function(e){return r.showForm(e)},color:"primary"},{key:"delete",title:"Удалить",onClick:function(e){return r.deleteUser(e)},color:"secondary"}]),$t(Yt(r),"filterControls",[{key:"status",label:"Статус",options:xt},{key:"role",label:"Роль",options:St}]),$t(Yt(r),"handleFiltersChange",(function(e){var t=r.props,n=t.setFilters,a=t.fetchUsers;n(e),a()})),$t(Yt(r),"setPage",(function(e){var t=r.props.filters;r.handleFiltersChange(Jt({},t,{page:e}))})),$t(Yt(r),"setLimit",(function(e){var t=r.props.filters;r.handleFiltersChange(Jt({},t,{limit:e,page:1}))})),$t(Yt(r),"setFilter",(function(e){var t=e.target,n=t.name,a=t.value,o=r.props.filters;r.handleFiltersChange(Jt({},o,$t({},n,a||null)))})),$t(Yt(r),"showForm",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;r.setState((function(t){t.form;return Jt({},Ht(t,["form"]),{form:{open:!0,data:e}})}))})),$t(Yt(r),"hideForm",(function(){r.setState((function(e){e.form;return Jt({},Ht(e,["form"]),{form:{open:!1,data:null}})}))})),$t(Yt(r),"handleFormSubmit",(function(e){var t=r.state.form.data;(0,r.props.mutateUsers)(Jt({},e,{id:t.id}),r.hideForm)})),$t(Yt(r),"deleteUser",(function(e){var t=r.props.deleteUser;confirm("Удалить пользователя ".concat(e.name,"?"))&&t(e.id)})),r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Zt(e,t)}(t,e),r=t,(n=[{key:"componentDidMount",value:function(){var e=this.props,t=e.fetchUsers;(0,e.setHeader)({title:"Пользователи",addBtn:{onClick:this.showForm,text:"Добавить пользователя"},search:{placeholder:"Поиск по пользователям",onSearch:function(e){(!e||2<e.length)&&t()}}}),t()}},{key:"componentWillUnmount",value:function(){(0,this.props.setHeader)({})}},{key:"render",value:function(){var e=this,t=this.state.form,r=this.props,n=r.classes,o=r.users,c=r.filters,i=r.total;return a.a.createElement(a.a.Fragment,null,t.open&&a.a.createElement(Vt,{data:t.data,handleClose:this.hideForm,handleSubmit:this.handleFormSubmit}),a.a.createElement("div",{className:n.filters},this.filterControls.map((function(t){return a.a.createElement(Ce.a,{key:t.key,select:!0,SelectProps:{displayEmpty:!0},InputLabelProps:{shrink:!0},label:t.label,className:n.filterSelect,name:t.key,onChange:e.setFilter,value:c[t.key]||""},a.a.createElement(ft.a,{value:""},"Все"),t.options.map((function(e){return a.a.createElement(ft.a,{key:e.value,value:e.value},e.label)})))}))),a.a.createElement(Et,{items:o,columns:this.columns,actions:this.actions,page:c.page,onPageChange:this.setPage,limit:c.limit,onLimitChange:this.setLimit,total:i}))}}])&&Kt(r.prototype,n),o&&Kt(r,o),t}(a.a.Component);er.propTypes={users:st.a.array.isRequired,isLoading:st.a.bool.isRequired,filters:st.a.object.isRequired,total:st.a.number.isRequired,fetchUsers:st.a.func.isRequired,classes:st.a.object.isRequired,deleteUser:st.a.func.isRequired,mutateUsers:st.a.func.isRequired,setHeader:st.a.func.isRequired};var tr={fetchUsers:A,setFilters:function(e){return{type:"users:setFilters",filters:e}},deleteUser:function(e){return{type:"users:delete",payload:e}},mutateUsers:function(e,t){return{type:"users:mutate",payload:e,callback:t}},setHeader:function(e){return{type:"header:set",payload:e}}},rr=Object(c.b)((function(e){return Jt({},e.usersReducer)}),tr)(Object(pt.a)((function(e){return{filters:{marginBottom:e.spacing(2),display:"flex",justifyContent:"flex-end","& > *:not(:last-child)":{marginRight:e.spacing(3)}},filterSelect:{minWidth:100}}}))(er));function nr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ar(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function or(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var r=[],n=!0,a=!1,o=void 0;try{for(var c,i=e[Symbol.iterator]();!(n=(c=i.next()).done)&&(r.push(c.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{n||null==i.return||i.return()}finally{if(a)throw o}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var cr=Object(Te.a)((function(e){return{form:{"& > div:not(:last-child)":{marginBottom:e.spacing(2)}}}}));function ir(e){var t=e.data,r=e.handleClose,n=e.handleSubmit,o=cr(),c=t&&t.id,i=c?{name:t.name,airtime:t.airtime,comment:t.comment}:{},l=or(a.a.useState(i),2),u=l[0],s=l[1],f=function(e){var t=e.target;s(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?nr(Object(r),!0).forEach((function(t){ar(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},u,ar({},t.name,t.value)))};return a.a.createElement(Lt,{open:!0,title:c?"Редактирование рекламодателя ".concat(t.name):"Создание рекламодателя",handleClose:r,handleSubmit:function(){return n(u)},isValid:!(!u.name||!u.airtime)},a.a.createElement("form",{className:o.form},a.a.createElement(Ce.a,{fullWidth:!0,name:"name",label:"Имя",value:u.name||"",onChange:f,variant:"outlined",margin:"dense"}),a.a.createElement(Ce.a,{fullWidth:!0,name:"airtime",label:"Эфирное время",type:"number",value:u.airtime||"",onChange:f,inputProps:{min:"0.1",max:"100",step:"0.1"},variant:"outlined",margin:"dense"}),a.a.createElement(Ce.a,{fullWidth:!0,name:"comment",label:"Комментарий",value:u.comment||"",onChange:f,variant:"outlined",margin:"dense"})))}function lr(e){return(lr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ur(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function sr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function fr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?sr(Object(r),!0).forEach((function(t){gr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function pr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function mr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function br(e,t){return!t||"object"!==lr(t)&&"function"!=typeof t?hr(e):t}function dr(e){return(dr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function hr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yr(e,t){return(yr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function gr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}ir.propTypes={open:st.a.bool,data:st.a.object,handleClose:st.a.func,handleSubmit:st.a.func};var Or=function(e){function t(){var e,r;pr(this,t);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return gr(hr(r=br(this,(e=dr(t)).call.apply(e,[this].concat(a)))),"state",{form:{open:!1,data:null}}),gr(hr(r),"columns",[{key:"name",title:"Имя"},{key:"airtime",title:"Эфирное время"},{key:"comment",title:"Комментарий"},{key:"created_at",title:"Дата создания"}]),gr(hr(r),"actions",[{key:"edit",title:"Редактировать",onClick:function(e){return r.showForm(e)},color:"primary"},{key:"delete",title:"Удалить",onClick:function(e){return r.deletePublisher(e)},color:"secondary"}]),gr(hr(r),"handleFiltersChange",(function(e){var t=r.props,n=t.setFilters,a=t.fetchPublishers;n(e),a()})),gr(hr(r),"setPage",(function(e){var t=r.props.filters;r.handleFiltersChange(fr({},t,{page:e}))})),gr(hr(r),"setLimit",(function(e){var t=r.props.filters;r.handleFiltersChange(fr({},t,{limit:e,page:1}))})),gr(hr(r),"showForm",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;r.setState((function(t){t.form;return fr({},ur(t,["form"]),{form:{open:!0,data:e}})}))})),gr(hr(r),"hideForm",(function(){r.setState((function(e){e.form;return fr({},ur(e,["form"]),{form:{open:!1,data:null}})}))})),gr(hr(r),"handleFormSubmit",(function(e){var t=r.state.form.data,n=r.props,a=n.fetchPublishers,o=n.addPublisher,c=n.updatePublisher;t&&t.id?c(e,t.id,(function(){a(),r.hideForm()})):o(e,(function(){a(),r.hideForm()}))})),gr(hr(r),"deletePublisher",(function(e){var t=r.props,n=t.fetchPublishers,a=t.deletePublisher;confirm("Удалить рекламодателя ".concat(e.name))&&a(e.id,(function(){n()}))})),r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&yr(e,t)}(t,e),r=t,(n=[{key:"componentDidMount",value:function(){(0,this.props.fetchPublishers)()}},{key:"render",value:function(){var e=this.state.form,t=this.props,r=t.classes,n=t.publishers,o=t.filters,c=t.total;return a.a.createElement(a.a.Fragment,null,e.open&&a.a.createElement(ir,{data:e.data,handleClose:this.hideForm,handleSubmit:this.handleFormSubmit}),a.a.createElement("div",{className:r.controls},a.a.createElement(je.a,{variant:"contained",color:"primary",onClick:this.showForm},"Добавить рекламодателя")),a.a.createElement(Et,{items:n,columns:this.columns,actions:this.actions,page:o.page,onPageChange:this.setPage,limit:o.limit,onLimitChange:this.setLimit,total:c}))}}])&&mr(r.prototype,n),o&&mr(r,o),t}(a.a.Component);Or.propTypes={publishers:st.a.array.isRequired,isLoading:st.a.bool.isRequired,filters:st.a.object.isRequired,total:st.a.number.isRequired,fetchPublishers:st.a.func.isRequired,setFilters:st.a.func.isRequired,addPublisher:st.a.func.isRequired,updatePublisher:st.a.func.isRequired,deletePublisher:st.a.func.isRequired,classes:st.a.object.isRequired};var vr={fetchPublishers:function(){return{type:"publishers:fetch"}},setFilters:function(e){return{type:"publishers:setFilters",filters:e}},addPublisher:function(e,t){return{type:"publishers:add",formData:e,callback:t}},updatePublisher:function(e,t,r){return{type:"publishers:update",formData:e,publisherId:t,callback:r}},deletePublisher:function(e,t){return{type:"publishers:delete",publisherId:e,callback:t}}},jr=Object(c.b)((function(e){return fr({},e.publishersReducer)}),vr)(Object(pt.a)((function(e){return{controls:{marginBottom:e.spacing(2)}}}))(Or));function wr(e){return e.includes(".mp4")||e.includes(".mov")?a.a.createElement("video",{controls:!0,height:150,src:"/".concat(e)}):a.a.createElement("img",{height:150,alt:"some",src:"/".concat(e)})}function Pr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Er(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Pr(Object(r),!0).forEach((function(t){kr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Pr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function kr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Cr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var r=[],n=!0,a=!1,o=void 0;try{for(var c,i=e[Symbol.iterator]();!(n=(c=i.next()).done)&&(r.push(c.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{n||null==i.return||i.return()}finally{if(a)throw o}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Sr=Object(Te.a)((function(e){return{form:{"& > div:not(:last-child)":{marginBottom:e.spacing(2)}}}}));function xr(e){var t=e.data,r=e.handleClose,n=e.handleSubmit,o=Sr(),c=t&&t.id,i=c?{file:t.airtime,comment:t.comment}:{},l=Cr(a.a.useState(i),2),u=l[0],s=l[1];return a.a.createElement(Lt,{open:!0,title:c?"Редактирование контента ".concat(t.name):"Создание контента",handleClose:r,handleSubmit:function(){return n(u)},isValid:!(!c&&!u.file)},a.a.createElement("form",{className:o.form,encType:"multipart/form-data"},a.a.createElement(Ce.a,{fullWidth:!0,name:"file",type:"file",onChange:function(e){var t=e.target,r=t.files,n=t.name;s(Er({},u,kr({},n,r[0])))},variant:"outlined",margin:"dense"}),a.a.createElement(Ce.a,{fullWidth:!0,name:"comment",label:"Комментарий",value:u.comment||"",onChange:function(e){var t=e.target;s(Er({},u,kr({},t.name,t.value)))},variant:"outlined",margin:"dense"})))}function Rr(e){return(Rr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Dr(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Fr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Nr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Fr(Object(r),!0).forEach((function(t){Br(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Fr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Tr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function qr(e,t){return!t||"object"!==Rr(t)&&"function"!=typeof t?Lr(e):t}function Ir(e){return(Ir=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Lr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ar(e,t){return(Ar=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Br(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}xr.propTypes={open:st.a.bool,data:st.a.object,handleClose:st.a.func,handleSubmit:st.a.func};var Wr=function(e){function t(){var e,r;_r(this,t);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return Br(Lr(r=qr(this,(e=Ir(t)).call.apply(e,[this].concat(a)))),"state",{form:{open:!1,data:null}}),Br(Lr(r),"columns",[{key:"name",title:"Имя"},{key:"preview",title:"Предпросмотр",getValue:function(e){return wr(e.src)}},{key:"comment",title:"Комментарий"},{key:"created_at",title:"Дата создания"}]),Br(Lr(r),"actions",[{key:"edit",title:"Редактировать",onClick:function(e){return r.showForm(e)},color:"primary"},{key:"delete",title:"Удалить",onClick:function(e){return r.deleteContent(e)},color:"secondary"}]),Br(Lr(r),"handleFiltersChange",(function(e){var t=r.props,n=t.setFilters,a=t.fetchContent;n(e),a()})),Br(Lr(r),"setPage",(function(e){var t=r.props.filters;r.handleFiltersChange(Nr({},t,{page:e}))})),Br(Lr(r),"setLimit",(function(e){var t=r.props.filters;r.handleFiltersChange(Nr({},t,{limit:e,page:1}))})),Br(Lr(r),"showForm",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;r.setState((function(t){t.form;return Nr({},Dr(t,["form"]),{form:{open:!0,data:e}})}))})),Br(Lr(r),"hideForm",(function(){r.setState((function(e){e.form;return Nr({},Dr(e,["form"]),{form:{open:!1,data:null}})}))})),Br(Lr(r),"handleFormSubmit",(function(e){var t=r.state.form.data,n=r.props,a=n.fetchContent,o=n.addContent,c=n.updateContent,i=new FormData;i.set("comment",e.comment),i.append("file",e.file),t&&t.id?c(i,t.id,(function(){a(),r.hideForm()})):o(i,(function(){a(),r.hideForm()}))})),Br(Lr(r),"deleteContent",(function(e){var t=r.props,n=t.fetchContent,a=t.deleteContent;confirm("Удалить контент ".concat(e.name))&&a(e.id,(function(){n()}))})),r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ar(e,t)}(t,e),r=t,(n=[{key:"componentDidMount",value:function(){(0,this.props.fetchContent)()}},{key:"render",value:function(){var e=this.state.form,t=this.props,r=t.classes,n=t.content,o=t.filters,c=t.total;return a.a.createElement(a.a.Fragment,null,e.open&&a.a.createElement(xr,{data:e.data,handleClose:this.hideForm,handleSubmit:this.handleFormSubmit}),a.a.createElement("div",{className:r.controls},a.a.createElement(je.a,{variant:"contained",color:"primary",onClick:this.showForm},"Добавить контент")),a.a.createElement(Et,{items:n,columns:this.columns,actions:this.actions,page:o.page,onPageChange:this.setPage,limit:o.limit,onLimitChange:this.setLimit,total:c}))}}])&&Tr(r.prototype,n),o&&Tr(r,o),t}(a.a.Component);Wr.propTypes={content:st.a.array.isRequired,isLoading:st.a.bool.isRequired,filters:st.a.object.isRequired,total:st.a.number.isRequired,fetchContent:st.a.func.isRequired,setFilters:st.a.func.isRequired,addContent:st.a.func.isRequired,updateContent:st.a.func.isRequired,deleteContent:st.a.func.isRequired,classes:st.a.object.isRequired};var Ur,Vr={fetchContent:function(){return{type:"content:fetch"}},setFilters:function(e){return{type:"content:setFilters",filters:e}},addContent:function(e,t){return{type:"content:add",formData:e,callback:t}},updateContent:function(e,t,r){return{type:"content:update",formData:e,contentId:t,callback:r}},deleteContent:function(e,t){return{type:"content:delete",contentId:e,callback:t}}},Mr=Object(c.b)((function(e){return Nr({},e.contentReducer)}),Vr)(Object(pt.a)((function(e){return{controls:{marginBottom:e.spacing(2)}}}))(Wr)),Hr=Object(s.a)(),Gr=Object(u.e)(R,Object(u.a)(Hr));(Ur=Hr).run(X),Ur.run(ce),Ur.run(he),Object(o.render)(a.a.createElement(c.a,{store:Gr},a.a.createElement(i.a,{basename:"/admin/"},a.a.createElement(lt,null,a.a.createElement(l.c,null,a.a.createElement(l.a,{path:"/users/",component:rr,exact:!0}),a.a.createElement(l.a,{path:"/publishers/",component:jr,exact:!0}),a.a.createElement(l.a,{path:"/content/",component:Mr,exact:!0}))))),document.getElementById("app"))}});