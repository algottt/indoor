!function(e){function t(t){for(var n,c,i=t[0],l=t[1],u=t[2],p=0,f=[];p<i.length;p++)c=i[p],Object.prototype.hasOwnProperty.call(a,c)&&a[c]&&f.push(a[c][0]),a[c]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);for(s&&s(t);f.length;)f.shift()();return o.push.apply(o,u||[]),r()}function r(){for(var e,t=0;t<o.length;t++){for(var r=o[t],n=!0,i=1;i<r.length;i++){var l=r[i];0!==a[l]&&(n=!1)}n&&(o.splice(t--,1),e=c(c.s=r[0]))}return e}var n={},a={0:0},o=[];function c(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,c),r.l=!0,r.exports}c.m=e,c.c=n,c.d=function(e,t,r){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},c.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(c.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)c.d(r,n,function(t){return e[t]}.bind(null,n));return r},c.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="";var i=window.webpackJsonp=window.webpackJsonp||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var u=0;u<i.length;u++)t(i[u]);var s=l;o.push([265,1]),r()}({265:function(e,t,r){r(266),e.exports=r(495)},495:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),o=r(19),c=r(31),i=r(95),l=r(77),u=r(68),s=r(246);function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){b(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function b(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){y(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var h={placeholder:"Поиск...",onSearch:null,value:""},g={text:"Добавить",onClick:null},O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{addBtn:g,search:h,title:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"header:set":var r=t.payload,n=r.search,a=r.title,o=r.addBtn;return d({},e,{search:d({},h,{},n||{}),addBtn:d({},g,{},o||{}),title:a||null});case"header:setSearchValue":return d({},e,{search:d({},e.search,{value:t.payload})});default:return e}};function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function j(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){w(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function w(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{open:!1,message:"",duration:3e3,variant:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"notifications:show_message":return j({},e,{},t.payload,{open:!0});case"notifications:close":return j({},e,{open:!1,duration:3e3});default:return e}};function E(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function k(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?E(Object(r),!0).forEach((function(t){S(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function S(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{users:[],total:0,isLoading:!1,filters:{limit:10,page:1}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"users:setFilters":return k({},e,{filters:t.filters});case"users:receive":return k({},e,{users:t.users.results,total:t.users.total});default:return e}};function x(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function D(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?x(Object(r),!0).forEach((function(t){R(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function R(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{publishers:[],total:0,isLoading:!1,filters:{limit:10,page:1}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"publishers:setFilters":return D({},e,{filters:t.filters});case"publishers:receive":return D({},e,{publishers:t.publishers.results,total:t.publishers.total});default:return e}};function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function L(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach((function(t){I(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function I(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{content:[],total:0,isLoading:!1,filters:{limit:10,page:1}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"content:setFilters":return L({},e,{filters:t.filters});case"content:receive":return L({},e,{content:t.content.results,total:t.content.total});default:return e}};function T(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function q(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?T(Object(r),!0).forEach((function(t){U(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function U(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var W=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{devices:[],total:0,isLoading:!1,cities:[],locations:[],filters:{limit:10,page:1}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"devices:setFilters":return q({},e,{filters:t.filters});case"devices:receive":return q({},e,{devices:t.devices.results,total:t.devices.total,cities:t.cities.results});case"locations:receive":return q({},e,{locations:t.locations.results});default:return e}},A=Object(u.c)({rootReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{currentUser:null,isLoading:!0},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"root:currentUser:fetch":return f({},e,{isLoading:!0});case"root:currentUser:receive":var r=t.payload;return f({},e,{isLoading:!1,currentUser:r});default:return e}},headerReducer:O,notificationReducer:P,usersReducer:C,publishersReducer:F,contentReducer:N,devicesReducer:W}),B=r(8),H=function(e,t){return{type:"notifications:show_message",payload:{message:e,variant:t}}},V=function(e){return H(e,"success")},M=function(e){var t=e.response,r="Ошибка сервера!";return t&&400===t.status&&t.data&&t.data.errors&&(r=t.data.errors.join("\n")),function(e){return H(e,"error")}(r)},z=r(116),K=r.n(z);function G(e){throw 403===e.response.status&&(window.location="/"),e}var J=function(e,t){return K.a.get(e,{params:t}).catch(G)},Y=function(e,t,r){return K.a.post(e,t,{headers:r}).catch(G)},Q=function(e,t,r){return K.a.put(e,t,{headers:r}).catch(G)},X=function(e,t){return K.a.delete(e,{params:t}).catch(G)},Z=regeneratorRuntime.mark(ee),$=regeneratorRuntime.mark(te);function ee(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(B.b)(J,"/users/current/");case 3:return e=t.sent,t.next=6,Object(B.c)({type:"root:currentUser:receive",payload:e.data});case 6:t.next=12;break;case 8:return t.prev=8,t.t0=t.catch(0),t.next=12,Object(B.c)(M(t.t0));case 12:case"end":return t.stop()}}),Z,null,[[0,8]])}function te(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(B.a)([Object(B.f)("root:currentUser:fetch",ee)]);case 2:case"end":return e.stop()}}),$)}var re=function(){return{type:"users:fetch"}};function ne(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var ae=regeneratorRuntime.mark(pe),oe=regeneratorRuntime.mark(fe),ce=regeneratorRuntime.mark(be),ie=regeneratorRuntime.mark(me);function le(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ue(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?le(Object(r),!0).forEach((function(t){se(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):le(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function se(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pe(){var e,t;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Object(B.d)((function(e){var t=e.usersReducer.filters,r=e.headerReducer.search;return ue({},t,{},r.value?{query:r.value}:{})}));case 3:return e=r.sent,r.next=6,Object(B.b)(J,"/users/",e);case 6:return t=r.sent,r.next=9,Object(B.c)({type:"users:receive",users:t.data});case 9:r.next=15;break;case 11:return r.prev=11,r.t0=r.catch(0),r.next=15,Object(B.c)(M(r.t0));case 15:case"end":return r.stop()}}),ae,null,[[0,11]])}function fe(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(B.b)(X,"/users/".concat(e.payload,"/"));case 3:return t.next=5,Object(B.c)({type:"users:fetch"});case 5:return t.next=7,Object(B.c)(V("Пользователь успешно удален"));case 7:t.next=13;break;case 9:return t.prev=9,t.t0=t.catch(0),t.next=13,Object(B.c)(M(t.t0));case 13:case"end":return t.stop()}}),oe,null,[[0,9]])}function be(e){var t,r,n,a;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(t=e.payload,r=t.id,n=ne(t,["id"]),a=e.callback,o.prev=1,!r){o.next=7;break}return o.next=5,Object(B.b)(Q,"/users/".concat(r,"/"),n);case 5:o.next=9;break;case 7:return o.next=9,Object(B.b)(Y,"/users/",n);case 9:return o.next=11,Object(B.c)({type:"users:fetch"});case 11:return o.next=13,Object(B.c)(V("Пользователь успешно ".concat(r?"обновлен":"добавлен")));case 13:a&&a(),o.next=20;break;case 16:return o.prev=16,o.t0=o.catch(1),o.next=20,Object(B.c)(M(o.t0));case 20:case"end":return o.stop()}}),ce,null,[[1,16]])}function me(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(B.a)([Object(B.f)("users:fetch",pe),Object(B.f)("users:delete",fe),Object(B.f)("users:mutate",be)]);case 2:case"end":return e.stop()}}),ie)}var de=function(){return{type:"publishers:fetch"}};function ye(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var he=regeneratorRuntime.mark(Ee),ge=regeneratorRuntime.mark(ke),Oe=regeneratorRuntime.mark(Se),ve=regeneratorRuntime.mark(Ce);function je(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function we(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?je(Object(r),!0).forEach((function(t){Pe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):je(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Pe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ee(){var e,t;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Object(B.d)((function(e){var t=e.publishersReducer.filters,r=e.headerReducer.search;return we({},t,{},r.value?{query:r.value}:{})}));case 3:return e=r.sent,r.next=6,Object(B.b)(J,"/publishers/",e);case 6:return t=r.sent,r.next=9,Object(B.c)({type:"publishers:receive",publishers:t.data});case 9:r.next=15;break;case 11:return r.prev=11,r.t0=r.catch(0),r.next=15,Object(B.c)(M(r.t0));case 15:case"end":return r.stop()}}),he,null,[[0,11]])}function ke(e){var t,r,n,a;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(t=e.payload,r=t.id,n=ye(t,["id"]),a=e.callback,o.prev=1,!r){o.next=7;break}return o.next=5,Object(B.b)(Q,"/publishers/".concat(r,"/"),n);case 5:o.next=9;break;case 7:return o.next=9,Object(B.b)(Y,"/publishers/",n);case 9:return o.next=11,Object(B.c)({type:"publishers:fetch"});case 11:return o.next=13,Object(B.c)(V("Рекламодатель успешно ".concat(r?"обновлен":"добавлен")));case 13:a&&a(),o.next=20;break;case 16:return o.prev=16,o.t0=o.catch(1),o.next=20,Object(B.c)(M(o.t0));case 20:case"end":return o.stop()}}),ge,null,[[1,16]])}function Se(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(B.b)(X,"/publishers/".concat(e.payload,"/"));case 3:return t.next=5,Object(B.c)({type:"publishers:fetch"});case 5:return t.next=7,Object(B.c)(V("Рекламодатель успешно удален"));case 7:t.next=13;break;case 9:return t.prev=9,t.t0=t.catch(0),t.next=13,Object(B.c)(M(t.t0));case 13:case"end":return t.stop()}}),Oe,null,[[0,9]])}function Ce(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(B.a)([Object(B.f)("publishers:fetch",Ee),Object(B.f)("publishers:mutate",ke),Object(B.e)("publishers:delete",Se)]);case 2:case"end":return e.stop()}}),ve)}var xe=function(){return{type:"content:fetch"}},De=regeneratorRuntime.mark(Te),Re=regeneratorRuntime.mark(qe),Fe=regeneratorRuntime.mark(Ue),_e=regeneratorRuntime.mark(We);function Le(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ie(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Le(Object(r),!0).forEach((function(t){Ne(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Le(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ne(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Te(){var e,t;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Object(B.d)((function(e){var t=e.contentReducer.filters,r=e.headerReducer.search;return Ie({},t,{},r.value?{query:r.value}:{})}));case 3:return e=r.sent,r.next=6,Object(B.b)(J,"/content/",e);case 6:return t=r.sent,r.next=9,Object(B.c)({type:"content:receive",content:t.data});case 9:r.next=15;break;case 11:return r.prev=11,r.t0=r.catch(0),r.next=15,Object(B.c)(M(r.t0));case 15:case"end":return r.stop()}}),De,null,[[0,11]])}function qe(e){var t,r,n,a,o;return regeneratorRuntime.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(t=e.payload,r=t.id,n=t.formData,a=e.callback,o={"Content-Type":"multipart/form-data"},c.prev=2,!r){c.next=8;break}return c.next=6,Object(B.b)(Q,"/content/".concat(r,"/"),n,o);case 6:c.next=10;break;case 8:return c.next=10,Object(B.b)(Y,"/content/",n,o);case 10:return c.next=12,Object(B.c)({type:"content:fetch"});case 12:return c.next=14,Object(B.c)(V("Контент успешно ".concat(r?"обновлен":"добавлен")));case 14:a&&a(),c.next=21;break;case 17:return c.prev=17,c.t0=c.catch(2),c.next=21,Object(B.c)(M(c.t0));case 21:case"end":return c.stop()}}),Re,null,[[2,17]])}function Ue(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(B.b)(X,"/content/".concat(e.contentId,"/"));case 3:return t.next=5,Object(B.c)({type:"content:fetch"});case 5:return t.next=7,Object(B.c)(V("Контент успешно удален"));case 7:t.next=13;break;case 9:return t.prev=9,t.t0=t.catch(0),t.next=13,Object(B.c)(M(t.t0));case 13:case"end":return t.stop()}}),Fe,null,[[0,9]])}function We(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(B.a)([Object(B.f)("content:fetch",Te),Object(B.f)("content:mutate",qe),Object(B.e)("content:delete",Ue)]);case 2:case"end":return e.stop()}}),_e)}var Ae=function(){return{type:"devices:fetch"}},Be=function(e){return{type:"locations:fetch",payload:e}};function He(){return(He=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Ve(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var Me=regeneratorRuntime.mark(Ze),ze=regeneratorRuntime.mark($e),Ke=regeneratorRuntime.mark(et),Ge=regeneratorRuntime.mark(tt),Je=regeneratorRuntime.mark(rt);function Ye(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Qe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ye(Object(r),!0).forEach((function(t){Xe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ye(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Xe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ze(){var e,t,r,n;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(B.d)((function(e){var t=e.devicesReducer.filters,r=e.headerReducer.search;return Qe({},t,{},r.value?{query:r.value}:{})}));case 3:return e=a.sent,a.next=6,Object(B.b)(J,"/devices/",e);case 6:return t=a.sent,a.next=9,Object(B.b)(J,"/locations/cities/");case 9:return r=a.sent,a.next=12,Object(B.b)(J,"/locations/");case 12:return n=a.sent,a.next=15,Object(B.c)({type:"devices:receive",devices:t.data,locations:n.data,cities:r.data});case 15:a.next=21;break;case 17:return a.prev=17,a.t0=a.catch(0),a.next=21,Object(B.c)(M(a.t0));case 21:case"end":return a.stop()}}),Me,null,[[0,17]])}function $e(e){var t;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Object(B.b)(J,"/locations/".concat(e.payload,"/"));case 3:return t=r.sent,r.next=6,Object(B.c)({type:"locations:receive",locations:t.data});case 6:r.next=12;break;case 8:return r.prev=8,r.t0=r.catch(0),r.next=12,Object(B.c)(M(r.t0));case 12:case"end":return r.stop()}}),ze,null,[[0,8]])}function et(e){var t,r,n,a;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.payload,r=t.id,n=Ve(t,["id"]),a=e.callback,o.prev=1,o.next=4,Object(B.b)(Q,"/devices/".concat(r,"/"),n);case 4:return o.next=6,Object(B.c)({type:"devices:fetch"});case 6:return o.next=8,Object(B.c)(V("Девайс успешно обновлен"));case 8:a&&a(),o.next=15;break;case 11:return o.prev=11,o.t0=o.catch(1),o.next=15,Object(B.c)(M(o.t0));case 15:case"end":return o.stop()}}),Ke,null,[[1,11]])}function tt(e){var t,r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=He({},e.payload),r=e.callback,n.prev=1,n.next=4,Object(B.b)(Y,"/locations/",t);case 4:return n.next=6,Object(B.c)(Be(t.city_id));case 6:r&&r(),n.next=13;break;case 9:return n.prev=9,n.t0=n.catch(1),n.next=13,Object(B.c)(M(n.t0));case 13:case"end":return n.stop()}}),Ge,null,[[1,9]])}function rt(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(B.a)([Object(B.f)("devices:fetch",Ze),Object(B.f)("locations:fetch",$e),Object(B.f)("devices:mutate",et),Object(B.f)("locations:mutate",tt)]);case 2:case"end":return e.stop()}}),Je)}var nt=r(2),at=r.n(nt),ot=r(559),ct=r(560),it=r(7),lt=r(545),ut=r(546),st=r(547),pt=r(231),ft=r.n(pt),bt=r(543),mt=r(108),dt=r(574),yt=r(552),ht=r(234),gt=r.n(ht),Ot=r(104),vt=r.n(Ot),jt=r(137),wt=r.n(jt),Pt=function(e){return{type:"header:set",payload:e}},Et=r(229);function kt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var St=Object(Et.a)((function(e){var t;return{appBar:(t={backgroundColor:"white"},kt(t,e.breakpoints.up("sm"),{width:"calc(100% - 200px)",marginLeft:200}),kt(t,"color","black"),kt(t,"& > div",{justifyContent:"flex-end"}),t),menuButton:kt({},e.breakpoints.up("sm"),{display:"none"}),addButton:{marginLeft:e.spacing(3),fontWeight:"bold"},grow:{flexGrow:1},search:{width:270,marginRight:e.spacing(3)},searchInputRoot:{padding:"0 ".concat(e.spacing(1),"px")},searchInput:{padding:"".concat(e.spacing(1),"px ").concat(e.spacing(2),"px")},searchClose:{cursor:"pointer"}}}));function Ct(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function xt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Dt={setSearchValue:function(e){return{type:"header:setSearchValue",payload:e}}},Rt=Object(c.b)((function(e){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ct(Object(r),!0).forEach((function(t){xt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ct(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e.headerReducer)}),Dt)((function(e){var t=e.title,r=e.search,n=e.addBtn,o=e.setSearchValue,c=e.handleDrawerToggle,i=e.currentUser,l=St();return a.a.createElement(bt.a,{position:"fixed",className:l.appBar},a.a.createElement(lt.a,null,a.a.createElement(ut.a,{onClick:c,className:l.menuButton},a.a.createElement(ft.a,null)),a.a.createElement(mt.a,{variant:"h6",noWrap:!0},t),n.onClick&&a.a.createElement(st.a,{className:l.addButton,startIcon:a.a.createElement(wt.a,null),onClick:n.onClick},n.text),a.a.createElement("div",{className:l.grow}),r.onSearch&&a.a.createElement(dt.a,{className:l.search,value:r.value,onChange:function(e){var t=e.target.value;o(t),r.onSearch(t)},variant:"outlined",placeholder:r.placeholder,InputProps:{classes:{root:l.searchInputRoot,input:l.searchInput},startAdornment:a.a.createElement(yt.a,null,a.a.createElement(gt.a,null)),endAdornment:r.value?a.a.createElement(yt.a,null,a.a.createElement(vt.a,{onClick:function(){o(""),r.onSearch(null)},className:l.searchClose})):null}}),i.name,a.a.createElement(st.a,{color:"primary",onClick:function(){return Y("/users/logout/").then((function(){return window.location="/"}))}},"Выйти")))})),Ft=r(553),_t=r(575),Lt=r(556),It=r(551),Nt=r(497),Tt=r(554),qt=r(555),Ut=r(236),Wt=r.n(Ut),At=r(237),Bt=r.n(At),Ht=r(238),Vt=r.n(Ht),Mt=r(239),zt=r.n(Mt);function Kt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Gt=Object(Et.a)((function(e){var t;return{container:(t={},Kt(t,e.breakpoints.up("sm"),{width:200,flexShrink:0}),Kt(t,"position","relative"),t),logo:{fontWeight:"bold",lineHeight:"64px"},listIcon:{color:"white"},divider:{backgroundColor:"rgba(255, 255, 255, 0.5)"},navLink:{color:"white",textDecoration:"none","&.active > div":{borderLeftColor:"white",borderLeftWidth:3,borderLeftStyle:"solid",backgroundColor:"rgba(255, 255, 255, 0.1)"}},version:{position:"absolute",left:e.spacing(1),bottom:e.spacing(1),fontWeight:"bold"},paper:{width:200,backgroundColor:e.palette.primary.main,color:"white"}}}));function Jt(){return(Jt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Yt(e){var t=e.mobileOpen,r=e.handleDrawerToggle,n=e.currentUser,o=Gt(),c={classes:{paper:o.paper},children:a.a.createElement(a.a.Fragment,null,a.a.createElement(mt.a,{className:o.logo,variant:"h5",align:"center"},"InDoor"),a.a.createElement(Ft.a,{className:o.divider}),a.a.createElement(It.a,null,n.is_admin&&a.a.createElement(a.a.Fragment,null,a.a.createElement(i.b,{to:"/users/",className:o.navLink},a.a.createElement(Nt.a,{button:!0},a.a.createElement(Tt.a,null,a.a.createElement(Wt.a,{className:o.listIcon})),a.a.createElement(qt.a,{primary:"Пользователи"}))),a.a.createElement(i.b,{to:"/publishers/",className:o.navLink},a.a.createElement(Nt.a,{button:!0},a.a.createElement(Tt.a,null,a.a.createElement(Bt.a,{className:o.listIcon})),a.a.createElement(qt.a,{primary:"Рекламодатели"})))),a.a.createElement(i.b,{to:"/content/",className:o.navLink},a.a.createElement(Nt.a,{button:!0},a.a.createElement(Tt.a,null,a.a.createElement(Vt.a,{className:o.listIcon})),a.a.createElement(qt.a,{primary:"Контент"}))),a.a.createElement(i.b,{to:"/devices/",className:o.navLink},a.a.createElement(Nt.a,{button:!0},a.a.createElement(Tt.a,null,a.a.createElement(zt.a,{className:o.listIcon})),a.a.createElement(qt.a,{primary:"Устройства"})))),a.a.createElement(mt.a,{variant:"subtitle2",className:o.version},"2.20.03.001"))};return a.a.createElement("nav",{className:o.container},a.a.createElement(_t.a,{smUp:!0},a.a.createElement(Lt.a,Jt({variant:"temporary",open:t,onClose:r,ModalProps:{keepMounted:!0}},c))),a.a.createElement(_t.a,{xsDown:!0},a.a.createElement(Lt.a,Jt({variant:"permanent",open:!0},c))))}var Qt=r(75),Xt=r.n(Qt),Zt=r(557);function $t(e){var t=e.classes,r=e.className,n=e.size,o=e.thickness;return a.a.createElement("div",{className:Xt()(t.container,r)},a.a.createElement(Zt.a,{size:n,thickness:o}))}$t.defaultProps={size:30,thickness:4},$t.propTypes={className:at.a.object,size:at.a.number,thickness:at.a.number};var er=Object(it.a)((function(){return{container:{width:"100%",height:"100%",display:"flex",position:"absolute",alignItems:"center",justifyContent:"center"}}}))($t),tr=r(579),rr=r(558),nr=r(240),ar=r.n(nr),or=r(241),cr=r.n(or),ir=r(242),lr=r.n(ir);function ur(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function sr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pr(e){var t=e.open,r=e.message,n=e.duration,o=e.variant,c=e.close,i=e.classes;return a.a.createElement(tr.a,{anchorOrigin:{vertical:"top",horizontal:"right"},open:t,autoHideDuration:n,onClose:c},a.a.createElement(rr.a,{className:Xt()(i.message,i[o||"info"]),message:r,action:a.a.createElement(ut.a,{size:"small",color:"inherit",onClick:c},a.a.createElement(vt.a,{fontSize:"small"}))}))}pr.propTypes={open:at.a.bool,message:at.a.string,duration:at.a.number,variant:at.a.string,close:at.a.func,classes:at.a.object};var fr={close:function(){return{type:"notifications:close"}}},br=Object(c.b)((function(e){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ur(Object(r),!0).forEach((function(t){sr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ur(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e.notificationReducer)}),fr)(Object(it.a)((function(e){return{success:{backgroundColor:ar.a[500]},error:{backgroundColor:e.palette.error.dark},info:{backgroundColor:cr.a[500]},warning:{backgroundColor:lr.a[500]},message:{whiteSpace:"pre"}}}))(pr)),mr=r(245),dr=Object(mr.a)({typography:{fontFamily:"Officina Serif, Roboto, sans-serif"},palette:{primary:{main:"#39286c"}}});function yr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function hr(e){return(hr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Or(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function vr(e,t){return!t||"object"!==hr(t)&&"function"!=typeof t?wr(e):t}function jr(e){return(jr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function wr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Pr(e,t){return(Pr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Er(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var kr=function(e){function t(){var e,r;gr(this,t);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return Er(wr(r=vr(this,(e=jr(t)).call.apply(e,[this].concat(a)))),"state",{mobileOpen:!1}),Er(wr(r),"handleDrawerToggle",(function(){r.setState((function(e){return{mobileOpen:!e.mobileOpen}}))})),r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Pr(e,t)}(t,e),r=t,(n=[{key:"componentDidMount",value:function(){(0,this.props.fetchCurrentUser)()}},{key:"render",value:function(){var e=this.state.mobileOpen,t=this.props,r=t.classes,n=t.children,o=t.isLoading,c=t.currentUser;return a.a.createElement(ot.a,{theme:dr},a.a.createElement(ct.a,null),a.a.createElement(br,null),o?a.a.createElement(er,{size:50,thickness:5}):a.a.createElement("div",{className:r.root},a.a.createElement(Rt,{handleDrawerToggle:this.handleDrawerToggle,currentUser:c}),a.a.createElement(Yt,{classes:r,mobileOpen:e,handleDrawerToggle:this.handleDrawerToggle,currentUser:c}),a.a.createElement("main",{className:r.pageContainer},a.a.createElement("div",{className:r.pageContent},n))))}}])&&Or(r.prototype,n),o&&Or(r,o),t}(a.a.Component);kr.propTypes={classes:at.a.object,children:at.a.node,isLoading:at.a.bool,currentUser:at.a.object,fetchCurrentUser:at.a.func};var Sr={fetchCurrentUser:function(){return{type:"root:currentUser:fetch"}}},Cr=Object(c.b)((function(e){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?yr(Object(r),!0).forEach((function(t){Er(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e.rootReducer)}),Sr)(Object(it.a)((function(e){return{root:{display:"flex",height:"100vh",overflow:"hidden"},pageContainer:{flexGrow:1,padding:e.spacing(3),marginTop:64},pageContent:{height:"calc(100vh - 64px - ".concat(e.spacing(6),"px)"),overflow:"auto",position:"relative"}}}))(kr)),xr=r(567),Dr=r(140),Rr=r(566),Fr=r(564),_r=r(563),Lr=r(565),Ir=r(561),Nr=r(576),Tr=r(562),qr=r(578),Ur=Object(Et.a)({paper:{borderRadius:5,cursor:"default"},tableContainer:{backgroundColor:"white",borderTopLeftRadius:5,borderTopRightRadius:5,maxHeight:"calc(100vh - 230px)"},headCell:{backgroundColor:"white",fontWeight:"bold"},serial:{width:100},actions:{width:200},actionBtn:{display:"block",fontWeight:"bold"}});function Wr(e){var t=e.classes,r=e.columns,n=e.hasActions,o=e.sorting,c=e.onSortingChange,i=function(e){if(!e)return{};var t="-"===e.charAt(0);return{direction:t?"desc":"asc",field:t?e.substr(1):e}}(o);return a.a.createElement(Ir.a,null,a.a.createElement(Tr.a,null,a.a.createElement(_r.a,{className:Xt()(t.serial,t.headCell)},"№ п/п"),r.map((function(e){var r,n=e.sorting===i.field;return a.a.createElement(_r.a,{key:e.key,className:t.headCell},e.sorting&&a.a.createElement(qr.a,{hideSortIcon:!0,direction:i.direction,active:n,onClick:(r=e.sorting,function(){var e=!0;r===i.field&&"desc"===i.direction&&(e=!1),c("".concat(e?"-":"").concat(r))})},e.title)||e.title)})),n&&a.a.createElement(_r.a,{className:t.headCell},"Действия")))}function Ar(e){var t=e.actions,r=e.classes,n=e.columns,o=e.items;return a.a.createElement(Fr.a,null,o.map((function(e,o){return a.a.createElement(Tr.a,{hover:!0,key:e.id},a.a.createElement(_r.a,{className:r.serial},o+1),n.map((function(t){return a.a.createElement(_r.a,{key:t.key},t.getValue?t.getValue(e):e[t.key])})),t&&t.length&&a.a.createElement(_r.a,{className:r.actions},t.map((function(t){return a.a.createElement(st.a,{key:t.key,className:r.actionBtn,size:"small",color:t.color,onClick:function(){return t.onClick(e)}},t.title)}))))})))}function Br(e){var t=e.items,r=e.columns,n=e.actions,o=e.sorting,c=e.onSortingChange,i=e.page,l=e.onPageChange,u=e.limit,s=e.onLimitChange,p=e.total,f=Ur();return a.a.createElement(Dr.a,{className:f.paper},a.a.createElement(Lr.a,{className:f.tableContainer},a.a.createElement(Rr.a,{stickyHeader:!0},a.a.createElement(Wr,{classes:f,columns:r,hasActions:Boolean(n&&n.length),sorting:o,onSortingChange:c}),a.a.createElement(Ar,{actions:n,classes:f,columns:r,items:t}))),a.a.createElement(Nr.a,{labelRowsPerPage:"Количество строк на странице:",labelDisplayedRows:function(e){var t=e.from,r=e.to,n=e.count;return"".concat(t,"-").concat(-1===r?n:r," из ").concat(-1!==n?n:"больше, чем ".concat(r))},rowsPerPageOptions:[10,25,50],component:"div",count:p,page:i-1,onChangePage:function(e,t){return l(t+1)},rowsPerPage:u,onChangeRowsPerPage:function(e){var t=e.target.value;return s(t)}}))}function Hr(e){switch(e){case"Admin":return"Администратор";case"User":return"Пользователь";case"Manager":return"Менеджер"}}function Vr(e){switch(e){case"Active":return"Активен";case"Disabled":return"Неактивен";case"Deleted":return"Удален";case"Archive":return"Архивный"}}Br.propTypes={items:at.a.array,columns:at.a.arrayOf(at.a.shape({key:at.a.string,title:at.a.string,sorting:at.a.string,getValue:at.a.func})),actions:at.a.arrayOf(at.a.shape({key:at.a.string,title:at.a.string,onClick:at.a.func})),sorting:at.a.string,onSortingChange:at.a.func,page:at.a.number,onPageChange:at.a.func,limit:at.a.number,onLimitChange:at.a.func,total:at.a.number};var Mr=[{value:"Manager",label:"Менеджер"},{value:"Admin",label:"Администратор"}],zr=[{value:"Active",label:"Активен"},{value:"Disabled",label:"Неактивен"},{value:"Deleted",label:"Удален"},{value:"Archive",label:"Архивный"}],Kr=r(498),Gr=r(568),Jr=r(569),Yr=r(570),Qr=r(571);function Xr(){return(Xr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var Zr=a.a.forwardRef((function(e,t){return a.a.createElement(Kr.a,Xr({direction:"up",ref:t},e))})),$r=Object(Et.a)((function(e){return{content:{paddingBottom:e.spacing(4)}}}));function en(e){var t=e.open,r=e.title,n=e.handleClose,o=e.handleSubmit,c=e.children,i=e.isValid,l=$r();return a.a.createElement(Gr.a,{fullWidth:!0,maxWidth:"sm",open:t,onClose:n,TransitionComponent:Zr},a.a.createElement(Jr.a,null,r),a.a.createElement(Yr.a,{dividers:!0,className:l.content},c),a.a.createElement(Qr.a,null,a.a.createElement(st.a,{onClick:n},"Отмена"),a.a.createElement(st.a,{disabled:!i,onClick:o,color:"primary"},"Сохранить")))}en.propTypes={open:at.a.bool,title:at.a.string,handleClose:at.a.func,handleSubmit:at.a.func,children:at.a.node,isValid:at.a.bool};var tn=r(572),rn=r(244),nn=r.n(rn);function an(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function on(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?an(Object(r),!0).forEach((function(t){cn(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):an(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function cn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ln(e){return(ln="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function un(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function sn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function pn(e){return(pn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function bn(e,t){return(bn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function mn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var dn=function(e){function t(e){var r,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,o=pn(t).call(this,e),r=!o||"object"!==ln(o)&&"function"!=typeof o?fn(n):o,mn(fn(r),"inputRef",a.a.createRef()),mn(fn(r),"optionsRef",a.a.createRef()),mn(fn(r),"getOptions",(function(e){var t=r.props,n=t.path,a=t.valueKey,o=t.labelKey,c=t.optionsLimit;J("/".concat(n,"/"),{query:e,limit:c}).then((function(e){var t=e.data.results;r.setState({options:t.map((function(e){return{value:e[a],label:e[o]}}))})}))})),mn(fn(r),"clear",(function(){r.setState({value:"",selectedOption:null}),r.getOptions()})),mn(fn(r),"handleOutsideClick",(function(e){var t=e.target;r.optionsRef.current.contains(t)||r.inputRef.current.contains(t)||r.toggleShowOptions()})),mn(fn(r),"toggleShowOptions",(function(){var e=!r.state.showOptions;r.setState({showOptions:e}),e?document.addEventListener("click",r.handleOutsideClick,!1):document.removeEventListener("click",r.handleOutsideClick,!1)})),mn(fn(r),"handleSelect",(function(e){return function(){var t=r.props,n=t.onChange,a=t.name;r.setState((function(){return{value:e.label,selectedOption:e}})),r.toggleShowOptions(),n({target:{name:a,value:e.value}})}})),mn(fn(r),"handleInputChange",(function(e){var t=e.target.value;r.setState((function(){return{value:t,selectedOption:null}})),(2<t.length||!t)&&r.getOptions(t)})),mn(fn(r),"renderPopper",(function(){var e=r.state,t=e.options,n=e.selectedOption,o=r.props.classes;return a.a.createElement(tn.a,{open:!0,anchorEl:r.inputRef.current,ref:r.optionsRef,className:o.popper,style:{width:r.inputRef.current.clientWidth}},a.a.createElement(Dr.a,{className:o.paper},t.length?a.a.createElement("ul",{className:o.optionsList},t.map((function(e){var t=n&&n.value===e.value;return a.a.createElement("li",{key:e.value,className:Xt()(o.option,t?"selected":null),onClick:r.handleSelect(e)},e.label)}))):a.a.createElement("div",{className:o.noResults},"Нет результатов")))}));var c=e.initialValue,i=e.valueKey,l=e.labelKey;return r.state=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?un(Object(r),!0).forEach((function(t){mn(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):un(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({showOptions:!1,options:[]},c?{selectedOption:{value:c[i],label:c[l]},value:c[l]}:{selectedOption:null,value:""}),r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&bn(e,t)}(t,e),r=t,(n=[{key:"componentDidMount",value:function(){this.getOptions()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.handleOutsideClick,!1)}},{key:"render",value:function(){var e=this.state,t=e.showOptions,r=e.value,n=this.props,o=n.classes,c=n.label,i=n.variant,l=n.margin;return a.a.createElement(a.a.Fragment,null,a.a.createElement(dt.a,{fullWidth:!0,variant:i,margin:l,label:c,onChange:this.handleInputChange,value:r,onFocus:t?null:this.toggleShowOptions,ref:this.inputRef,InputProps:{classes:{root:o.root},endAdornment:a.a.createElement(a.a.Fragment,null,r&&a.a.createElement(ut.a,{onClick:this.clear,className:o.adornment},a.a.createElement(vt.a,null)),a.a.createElement(ut.a,{className:o.adornment,onClick:this.toggleShowOptions},a.a.createElement(nn.a,null)))}}),t&&this.renderPopper())}}])&&sn(r.prototype,n),o&&sn(r,o),t}(a.a.Component);dn.defaultProps={variant:"outlined",margin:"dense",valueKey:"id",labelKey:"id",onChange:console.log,optionsLimit:25},dn.propTypes={classes:at.a.object.isRequired,path:at.a.string.isRequired,name:at.a.string.isRequired,optionsLimit:at.a.number,onChange:at.a.func,label:at.a.string,variant:at.a.string,margin:at.a.string,valueKey:at.a.string,labelKey:at.a.string};var yn=Object(it.a)((function(e){var t;return{root:{paddingRight:5},adornment:{padding:2},popper:{zIndex:e.zIndex.modal},paper:on({},e.typography.body1,{overflow:"hidden",margin:"4px 0","& > ul":{maxHeight:"40vh",overflow:"auto"}}),optionsList:{listStyle:"none",margin:0,padding:"8px 0px"},option:(t={cursor:"pointer",padding:"6px 16px"},cn(t,e.breakpoints.up("sm"),{minHeight:"auto"}),cn(t,e.breakpoints.down("sm"),{lineHeight:2.3}),cn(t,"&:hover",{backgroundColor:e.palette.action.hover}),cn(t,"&.selected",{backgroundColor:e.palette.action.selected}),t),noResults:{color:e.palette.text.secondary,textAlign:"center",padding:"8px 0"}}}))(dn);function hn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function gn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function On(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var r=[],n=!0,a=!1,o=void 0;try{for(var c,i=e[Symbol.iterator]();!(n=(c=i.next()).done)&&(r.push(c.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{n||null==i.return||i.return()}finally{if(a)throw o}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var vn=Object(Et.a)((function(e){return{form:{"& > div:not(:last-child)":{marginBottom:e.spacing(2)}}}}));function jn(e){var t=e.data,r=e.handleClose,n=e.handleSubmit,o=vn(),c=t&&t.id,i=c?{name:t.name,email:t.email,role:t.role,publisher_id:t.publisher.id}:{role:"Manager"},l=On(a.a.useState(i),2),u=l[0],s=l[1],p=function(e){var t=e.target,r=t.name,n=t.value,a=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?hn(Object(r),!0).forEach((function(t){gn(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},u,gn({},r,n));"role"===r&&"Admin"===n&&delete a.publisher_id,s(a)};return a.a.createElement(en,{open:!0,title:c?"Редактирование пользователя ".concat(t.name):"Создание пользователя",handleClose:r,handleSubmit:function(){return n(u)},isValid:Boolean(u.name&&u.email&&(c||u.password))},a.a.createElement("form",{className:o.form},a.a.createElement(dt.a,{fullWidth:!0,name:"name",label:"Имя",value:u.name||"",onChange:p,variant:"outlined",margin:"dense"}),a.a.createElement(dt.a,{fullWidth:!0,name:"email",label:"Email",value:u.email||"",onChange:p,variant:"outlined",margin:"dense"}),a.a.createElement(dt.a,{autoComplete:"off",fullWidth:!0,name:"password",label:"Пароль",type:"password",value:u.password||"",onChange:p,variant:"outlined",margin:"dense"}),a.a.createElement(dt.a,{fullWidth:!0,select:!0,name:"role",label:"Роль",value:u.role,onChange:p,variant:"outlined",margin:"dense",SelectProps:{native:!0}},Mr.map((function(e){return a.a.createElement("option",{key:e.value,value:e.value},e.label)}))),"Admin"!==u.role&&a.a.createElement(yn,{name:"publisher_id",initialValue:c?t.publisher:null,onChange:p,path:"publishers",valueKey:"id",labelKey:"name",label:"Рекламодатель"})))}function wn(e){return(wn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pn(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function En(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function kn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?En(Object(r),!0).forEach((function(t){_n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):En(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Sn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Cn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function xn(e,t){return!t||"object"!==wn(t)&&"function"!=typeof t?Rn(e):t}function Dn(e){return(Dn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Rn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Fn(e,t){return(Fn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}jn.propTypes={open:at.a.bool,data:at.a.object,handleClose:at.a.func,handleSubmit:at.a.func};var Ln=function(e){function t(){var e,r;Sn(this,t);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return _n(Rn(r=xn(this,(e=Dn(t)).call.apply(e,[this].concat(a)))),"state",{form:{open:!1,data:null}}),_n(Rn(r),"columns",[{key:"name",title:"Имя",sorting:"name"},{key:"status",title:"Статус",sorting:"status",getValue:function(e){return Vr(e.status)}},{key:"email",title:"E-mail",sorting:"email"},{key:"publisher",title:"Рекламодатель",sorting:"publisher_id",getValue:function(e){return e.publisher?e.publisher.name:"-"}},{key:"role",title:"Роль",sorting:"role",getValue:function(e){return Hr(e.role)}}]),_n(Rn(r),"actions",[{key:"edit",title:"Редактировать",onClick:function(e){return r.showForm(e)},color:"primary"},{key:"delete",title:"Удалить",onClick:function(e){return r.deleteUser(e)},color:"secondary"}]),_n(Rn(r),"filterControls",[{key:"status",label:"Статус",options:zr},{key:"role",label:"Роль",options:Mr}]),_n(Rn(r),"handleFiltersChange",(function(e){var t=r.props,n=t.setFilters,a=t.fetchUsers;n(e),a()})),_n(Rn(r),"setPage",(function(e){var t=r.props.filters;r.handleFiltersChange(kn({},t,{page:e}))})),_n(Rn(r),"setLimit",(function(e){var t=r.props.filters;r.handleFiltersChange(kn({},t,{limit:e,page:1}))})),_n(Rn(r),"setSorting",(function(e){var t=r.props.filters;r.handleFiltersChange(kn({},t,{sort_by:e}))})),_n(Rn(r),"setFilter",(function(e){var t=e.target,n=t.name,a=t.value,o=r.props.filters;r.handleFiltersChange(kn({},o,_n({},n,a||null)))})),_n(Rn(r),"showForm",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;r.setState((function(t){t.form;return kn({},Pn(t,["form"]),{form:{open:!0,data:e}})}))})),_n(Rn(r),"hideForm",(function(){r.setState((function(e){e.form;return kn({},Pn(e,["form"]),{form:{open:!1,data:null}})}))})),_n(Rn(r),"handleFormSubmit",(function(e){var t=r.state.form.data;(0,r.props.mutateUsers)(kn({},e,{id:t.id}),r.hideForm)})),_n(Rn(r),"deleteUser",(function(e){var t=r.props.deleteUser;confirm("Удалить пользователя ".concat(e.name,"?"))&&t(e.id)})),r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Fn(e,t)}(t,e),r=t,(n=[{key:"componentDidMount",value:function(){var e=this.props,t=e.fetchUsers;(0,e.setHeader)({title:"Пользователи",addBtn:{onClick:this.showForm,text:"Добавить пользователя"},search:{placeholder:"Поиск по пользователям",onSearch:function(e){(!e||2<e.length)&&t()}}}),t()}},{key:"componentWillUnmount",value:function(){(0,this.props.setHeader)({})}},{key:"render",value:function(){var e=this,t=this.state.form,r=this.props,n=r.classes,o=r.users,c=r.filters,i=r.total;return a.a.createElement(a.a.Fragment,null,t.open&&a.a.createElement(jn,{data:t.data,handleClose:this.hideForm,handleSubmit:this.handleFormSubmit}),a.a.createElement("div",{className:n.filters},this.filterControls.map((function(t){return a.a.createElement(dt.a,{key:t.key,select:!0,SelectProps:{displayEmpty:!0},InputLabelProps:{shrink:!0},label:t.label,className:n.filterSelect,name:t.key,onChange:e.setFilter,value:c[t.key]||""},a.a.createElement(xr.a,{value:""},"Все"),t.options.map((function(e){return a.a.createElement(xr.a,{key:e.value,value:e.value},e.label)})))}))),a.a.createElement(Br,{items:o,columns:this.columns,actions:this.actions,sorting:c.sort_by,onSortingChange:this.setSorting,page:c.page,onPageChange:this.setPage,limit:c.limit,onLimitChange:this.setLimit,total:i}))}}])&&Cn(r.prototype,n),o&&Cn(r,o),t}(a.a.Component);Ln.propTypes={users:at.a.array.isRequired,isLoading:at.a.bool.isRequired,filters:at.a.object.isRequired,total:at.a.number.isRequired,fetchUsers:at.a.func.isRequired,classes:at.a.object.isRequired,deleteUser:at.a.func.isRequired,mutateUsers:at.a.func.isRequired,setHeader:at.a.func.isRequired};var In={fetchUsers:re,setFilters:function(e){return{type:"users:setFilters",filters:e}},deleteUser:function(e){return{type:"users:delete",payload:e}},mutateUsers:function(e,t){return{type:"users:mutate",payload:e,callback:t}},setHeader:Pt},Nn=Object(c.b)((function(e){return kn({},e.usersReducer)}),In)(Object(it.a)((function(e){return{filters:{marginBottom:e.spacing(2),display:"flex",justifyContent:"flex-end","& > *:not(:last-child)":{marginRight:e.spacing(3)}},filterSelect:{minWidth:100}}}))(Ln));function Tn(e){var t=new Date(e),r="".concat(t.getHours()<10?"0":"").concat(t.getHours()),n="".concat(t.getMinutes()<10?"0":"").concat(t.getMinutes()),a="".concat(t.getMonth()+1<10?"0":"").concat(t.getMonth()+1),o="".concat(t.getDate()<10?"0":"").concat(t.getDate());return"".concat(o,"-").concat(a,"-").concat(t.getFullYear()," ").concat(r,":").concat(n)}function qn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Un(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Wn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var r=[],n=!0,a=!1,o=void 0;try{for(var c,i=e[Symbol.iterator]();!(n=(c=i.next()).done)&&(r.push(c.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{n||null==i.return||i.return()}finally{if(a)throw o}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var An=Object(Et.a)((function(e){return{form:{"& > div:not(:last-child)":{marginBottom:e.spacing(2)}}}}));function Bn(e){var t=e.data,r=e.handleClose,n=e.handleSubmit,o=An(),c=t&&t.id,i=c?{name:t.name,airtime:t.airtime,comment:t.comment}:{},l=Wn(a.a.useState(i),2),u=l[0],s=l[1],p=function(e){var t=e.target;s(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?qn(Object(r),!0).forEach((function(t){Un(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},u,Un({},t.name,t.value)))};return a.a.createElement(en,{open:!0,title:c?"Редактирование рекламодателя ".concat(t.name):"Создание рекламодателя",handleClose:r,handleSubmit:function(){return n(u)},isValid:!(!u.name||!u.airtime)},a.a.createElement("form",{className:o.form},a.a.createElement(dt.a,{fullWidth:!0,name:"name",label:"Имя",value:u.name||"",onChange:p,variant:"outlined",margin:"dense"}),a.a.createElement(dt.a,{fullWidth:!0,name:"airtime",label:"Эфирное время",type:"number",value:u.airtime||"",onChange:p,inputProps:{min:"0.1",max:"100",step:"0.1"},variant:"outlined",margin:"dense"}),a.a.createElement(dt.a,{fullWidth:!0,name:"comment",label:"Комментарий",value:u.comment||"",onChange:p,variant:"outlined",margin:"dense"})))}function Hn(e){return(Hn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Vn(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Mn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function zn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Mn(Object(r),!0).forEach((function(t){Zn(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Mn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Kn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Gn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Jn(e,t){return!t||"object"!==Hn(t)&&"function"!=typeof t?Qn(e):t}function Yn(e){return(Yn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Qn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Xn(e,t){return(Xn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Zn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Bn.propTypes={open:at.a.bool,data:at.a.object,handleClose:at.a.func,handleSubmit:at.a.func};var $n=function(e){function t(){var e,r;Kn(this,t);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return Zn(Qn(r=Jn(this,(e=Yn(t)).call.apply(e,[this].concat(a)))),"state",{form:{open:!1,data:null}}),Zn(Qn(r),"columns",[{key:"name",title:"Имя",sorting:"name"},{key:"airtime",title:"Эфирное время",sorting:"airtime"},{key:"comment",title:"Комментарий",sorting:"comment"},{key:"created_at",title:"Дата создания",sorting:"created_at",getValue:function(e){return Tn(e.created_at)}}]),Zn(Qn(r),"actions",[{key:"edit",title:"Редактировать",onClick:function(e){return r.showForm(e)},color:"primary"},{key:"delete",title:"Удалить",onClick:function(e){return r.deletePublisher(e)},color:"secondary"}]),Zn(Qn(r),"handleFiltersChange",(function(e){var t=r.props,n=t.setFilters,a=t.fetchPublishers;n(e),a()})),Zn(Qn(r),"setPage",(function(e){var t=r.props.filters;r.handleFiltersChange(zn({},t,{page:e}))})),Zn(Qn(r),"setLimit",(function(e){var t=r.props.filters;r.handleFiltersChange(zn({},t,{limit:e,page:1}))})),Zn(Qn(r),"setSorting",(function(e){var t=r.props.filters;r.handleFiltersChange(zn({},t,{sort_by:e}))})),Zn(Qn(r),"showForm",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;r.setState((function(t){t.form;return zn({},Vn(t,["form"]),{form:{open:!0,data:e}})}))})),Zn(Qn(r),"hideForm",(function(){r.setState((function(e){e.form;return zn({},Vn(e,["form"]),{form:{open:!1,data:null}})}))})),Zn(Qn(r),"handleFormSubmit",(function(e){var t=r.state.form.data;(0,r.props.mutatePublisher)(zn({},e,{id:t.id}),r.hideForm)})),Zn(Qn(r),"deletePublisher",(function(e){var t=r.props.deletePublisher;confirm("Удалить рекламодателя ".concat(e.name,"?"))&&t(e.id)})),r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Xn(e,t)}(t,e),r=t,(n=[{key:"componentDidMount",value:function(){var e=this.props,t=e.fetchPublishers;(0,e.setHeader)({title:"Рекламодатели",addBtn:{onClick:this.showForm,text:"Добавить рекламодателя"},search:{placeholder:"Поиск по рекламодателям",onSearch:function(e){(!e||2<e.length)&&t()}}}),t()}},{key:"componentWillUnmount",value:function(){(0,this.props.setHeader)({})}},{key:"render",value:function(){var e=this.state.form,t=this.props,r=t.publishers,n=t.filters,o=t.total;return a.a.createElement(a.a.Fragment,null,e.open&&a.a.createElement(Bn,{data:e.data,handleClose:this.hideForm,handleSubmit:this.handleFormSubmit}),a.a.createElement(Br,{items:r,columns:this.columns,actions:this.actions,sorting:n.sort_by,onSortingChange:this.setSorting,page:n.page,onPageChange:this.setPage,limit:n.limit,onLimitChange:this.setLimit,total:o}))}}])&&Gn(r.prototype,n),o&&Gn(r,o),t}(a.a.Component);$n.propTypes={publishers:at.a.array.isRequired,isLoading:at.a.bool.isRequired,filters:at.a.object.isRequired,total:at.a.number.isRequired,fetchPublishers:at.a.func.isRequired,setFilters:at.a.func.isRequired,deletePublisher:at.a.func.isRequired,setHeader:at.a.func.isRequired};var ea={fetchPublishers:de,mutatePublisher:function(e,t){return{type:"publishers:mutate",payload:e,callback:t}},setFilters:function(e){return{type:"publishers:setFilters",filters:e}},deletePublisher:function(e){return{type:"publishers:delete",payload:e}},setHeader:Pt},ta=Object(c.b)((function(e){return zn({},e.publishersReducer)}),ea)($n);function ra(e){return e.includes(".mp4")?a.a.createElement("video",{controls:!0,height:150,src:"/".concat(e)}):e.includes(".png")?a.a.createElement("img",{height:150,alt:"some",src:"/".concat(e)}):a.a.createElement("div",null,"Неподдерживаемый формат")}function na(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function aa(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?na(Object(r),!0).forEach((function(t){oa(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):na(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function oa(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ca(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var r=[],n=!0,a=!1,o=void 0;try{for(var c,i=e[Symbol.iterator]();!(n=(c=i.next()).done)&&(r.push(c.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{n||null==i.return||i.return()}finally{if(a)throw o}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var ia=Object(Et.a)((function(e){return{form:{"& > div:not(:last-child)":{marginBottom:e.spacing(2)}}}}));function la(e){var t=e.data,r=e.handleClose,n=e.handleSubmit,o=ia(),c=t&&t.id,i=c?{file:t.airtime,comment:t.comment}:{},l=ca(a.a.useState(i),2),u=l[0],s=l[1];return a.a.createElement(en,{open:!0,title:c?"Редактирование контента ".concat(t.name):"Создание контента",handleClose:r,handleSubmit:function(){return n(u)},isValid:!(!c&&!u.file)},a.a.createElement("form",{className:o.form,encType:"multipart/form-data"},a.a.createElement(dt.a,{fullWidth:!0,name:"file",type:"file",onChange:function(e){var t=e.target,r=t.files,n=t.name;s(aa({},u,oa({},n,r[0])))},variant:"outlined",margin:"dense"}),a.a.createElement(dt.a,{fullWidth:!0,name:"comment",label:"Комментарий",value:u.comment||"",onChange:function(e){var t=e.target;s(aa({},u,oa({},t.name,t.value)))},variant:"outlined",margin:"dense"})))}function ua(e){return(ua="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function sa(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function pa(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function fa(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?pa(Object(r),!0).forEach((function(t){Oa(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pa(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ba(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ma(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function da(e,t){return!t||"object"!==ua(t)&&"function"!=typeof t?ha(e):t}function ya(e){return(ya=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ha(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ga(e,t){return(ga=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Oa(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}la.propTypes={open:at.a.bool,data:at.a.object,handleClose:at.a.func,handleSubmit:at.a.func};var va=function(e){function t(){var e,r;ba(this,t);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return Oa(ha(r=da(this,(e=ya(t)).call.apply(e,[this].concat(a)))),"state",{form:{open:!1,data:null}}),Oa(ha(r),"columns",[{key:"name",title:"Имя",sorting:"name"},{key:"preview",title:"Предпросмотр",getValue:function(e){return ra(e.src)}},{key:"comment",title:"Комментарий",sorting:"comment"},{key:"created_at",title:"Дата создания",sorting:"created_at",getValue:function(e){return Tn(e.created_at)}}]),Oa(ha(r),"actions",[{key:"edit",title:"Редактировать",onClick:function(e){return r.showForm(e)},color:"primary"},{key:"delete",title:"Удалить",onClick:function(e){return r.deleteContent(e)},color:"secondary"}]),Oa(ha(r),"handleFiltersChange",(function(e){var t=r.props,n=t.setFilters,a=t.fetchContent;n(e),a()})),Oa(ha(r),"setPage",(function(e){var t=r.props.filters;r.handleFiltersChange(fa({},t,{page:e}))})),Oa(ha(r),"setLimit",(function(e){var t=r.props.filters;r.handleFiltersChange(fa({},t,{limit:e,page:1}))})),Oa(ha(r),"setSorting",(function(e){var t=r.props.filters;r.handleFiltersChange(fa({},t,{sort_by:e}))})),Oa(ha(r),"showForm",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;r.setState((function(t){t.form;return fa({},sa(t,["form"]),{form:{open:!0,data:e}})}))})),Oa(ha(r),"hideForm",(function(){r.setState((function(e){e.form;return fa({},sa(e,["form"]),{form:{open:!1,data:null}})}))})),Oa(ha(r),"handleFormSubmit",(function(e){var t=r.state.form.data,n=r.props.mutateContent,a=new FormData;a.set("comment",e.comment),a.append("file",e.file),n({formData:a,id:t.id},r.hideForm)})),Oa(ha(r),"deleteContent",(function(e){var t=r.props.deleteContent;confirm("Удалить контент ".concat(e.name))&&t(e.id)})),r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ga(e,t)}(t,e),r=t,(n=[{key:"componentDidMount",value:function(){var e=this.props,t=e.fetchContent;(0,e.setHeader)({title:"Контент",addBtn:{onClick:this.showForm,text:"Добавить контент"},search:{placeholder:"Поиск по контенту",onSearch:function(e){(!e||2<e.length)&&t()}}}),t()}},{key:"componentWillUnmount",value:function(){(0,this.props.setHeader)({})}},{key:"render",value:function(){var e=this.state.form,t=this.props,r=t.content,n=t.filters,o=t.total;return a.a.createElement(a.a.Fragment,null,e.open&&a.a.createElement(la,{data:e.data,handleClose:this.hideForm,handleSubmit:this.handleFormSubmit}),a.a.createElement(Br,{items:r,columns:this.columns,actions:this.actions,sorting:n.sort_by,onSortingChange:this.setSorting,page:n.page,onPageChange:this.setPage,limit:n.limit,onLimitChange:this.setLimit,total:o}))}}])&&ma(r.prototype,n),o&&ma(r,o),t}(a.a.Component);va.propTypes={content:at.a.array.isRequired,isLoading:at.a.bool.isRequired,filters:at.a.object.isRequired,total:at.a.number.isRequired,fetchContent:at.a.func.isRequired,setFilters:at.a.func.isRequired,mutateContent:at.a.func.isRequired,deleteContent:at.a.func.isRequired,setHeader:at.a.func.isRequired};var ja={fetchContent:xe,setFilters:function(e){return{type:"content:setFilters",filters:e}},mutateContent:function(e,t){return{type:"content:mutate",payload:e,callback:t}},deleteContent:function(e,t){return{type:"content:delete",contentId:e,callback:t}},setHeader:Pt},wa=Object(c.b)((function(e){return fa({},e.contentReducer)}),ja)(va);function Pa(e){switch(e){case"active":return"Активна";case"inactive":return"Не активна";case"approved":return"Одобрена";case"unapproved":return"Не одобрена"}}var Ea=[{value:"active",label:"Активна"},{value:"inactive",label:"Не активна"},{value:"approved",label:"Одобрена"},{value:"unapproved",label:"Не одобрена"}];function ka(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Sa(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ka(Object(r),!0).forEach((function(t){Ca(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ka(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ca(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xa(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var r=[],n=!0,a=!1,o=void 0;try{for(var c,i=e[Symbol.iterator]();!(n=(c=i.next()).done)&&(r.push(c.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{n||null==i.return||i.return()}finally{if(a)throw o}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Da=Object(Et.a)((function(e){return{form:{"& > div:not(:last-child)":{marginBottom:e.spacing(2)}}}}));function Ra(e){var t=e.data,r=e.citiesData,n=e.cityId,o=e.locationsData,c=e.handleClose,i=e.handleSubmit,l=e.handleChangeCity,u=e.handleLocationSubmit,s=Da(),p=t&&t.id?{location_id:t.location?t.location.id:null,comment:t.comment,status:t.status}:{},f=xa(a.a.useState(p),2),b=f[0],m=f[1],d=xa(a.a.useState({locationFormOpen:!1}),2),y=d[0],h=d[1],g=xa(a.a.useState({address:""}),2),O=g[0],v=g[1],j=function(e){var t=e.target;m(Sa({},b,Ca({},t.name,t.value)))},w=function(){h(Sa({},y,{locationFormOpen:!1}))};return a.a.createElement(a.a.Fragment,null,a.a.createElement(en,{open:!0,title:"Редактирование устройства ".concat(t.id),handleClose:c,handleSubmit:function(){return i(b)},isValid:!0},a.a.createElement("form",{className:s.form},a.a.createElement(dt.a,{fullWidth:!0,select:!0,name:"city_id",label:"Город",value:n||"",onChange:l,variant:"outlined",margin:"dense",SelectProps:{native:!0,displayEmpty:!0},InputLabelProps:{shrink:!0}},a.a.createElement("option",{value:""},"Не указан"),r.map((function(e){return a.a.createElement("option",{key:e.id,value:e.id},e.name)}))),a.a.createElement(Dr.a,{style:{padding:"2px 4px",display:"flex",alignItems:"center",width:"100%"}},a.a.createElement(dt.a,{disabled:!n,fullWidth:!0,select:!0,name:"location_id",label:"Адрес",value:n&&b.location_id||"",onChange:j,variant:"outlined",margin:"dense",SelectProps:{native:!0,displayEmpty:!0},InputLabelProps:{shrink:!0}},a.a.createElement("option",{value:""},"Не указан"),o.map((function(e){return a.a.createElement("option",{key:e.id,value:e.id},e.address)}))),a.a.createElement(ut.a,{onClick:function(){h(Sa({},y,{locationFormOpen:!0}))},"aria-label":"Добавить адрес",color:"primary",style:{padding:10,margin:"0 0 -4px 4px"}},a.a.createElement(wt.a,null))),a.a.createElement(dt.a,{fullWidth:!0,select:!0,name:"status",label:"Статус",value:b.status,onChange:j,variant:"outlined",margin:"dense",SelectProps:{native:!0}},Ea.map((function(e){return a.a.createElement("option",{key:e.value,value:e.value},e.label)}))),a.a.createElement(dt.a,{fullWidth:!0,name:"comment",label:"Комментарий",value:b.comment||"",onChange:j,variant:"outlined",margin:"dense"}))),a.a.createElement(en,{open:y.locationFormOpen,title:"Добавление адреса",handleClose:w,handleSubmit:function(){return u(O,w)},isValid:Boolean(O.address&&n)},a.a.createElement(mt.a,null,"Добавить адрес"),a.a.createElement(dt.a,{fullWidth:!0,select:!0,name:"city_id",label:"Город",value:n||"",onChange:l,variant:"outlined",margin:"dense",SelectProps:{native:!0,displayEmpty:!0},InputLabelProps:{shrink:!0}},a.a.createElement("option",{value:""},"Не указан"),r.map((function(e){return a.a.createElement("option",{key:e.id,value:e.id},e.name)}))),a.a.createElement(dt.a,{fullWidth:!0,name:"address",label:"Адрес",onChange:function(e){var t=e.target;v(Sa({},O,Ca({},t.name,t.value)))},variant:"outlined",margin:"dense"})))}function Fa(e){return(Fa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _a(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function La(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ia(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?La(Object(r),!0).forEach((function(t){Ba(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):La(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Na(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ta(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function qa(e,t){return!t||"object"!==Fa(t)&&"function"!=typeof t?Wa(e):t}function Ua(e){return(Ua=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Wa(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Aa(e,t){return(Aa=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ba(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Ra.propTypes={open:at.a.bool,data:at.a.object,cityId:at.a.number,handleClose:at.a.func,handleSubmit:at.a.func,handleChangeCity:at.a.func,handleLocationSubmit:at.a.func};var Ha=function(e){function t(){var e,r;Na(this,t);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return Ba(Wa(r=qa(this,(e=Ua(t)).call.apply(e,[this].concat(o)))),"state",{form:{open:!1,data:null,cityId:null}}),Ba(Wa(r),"columns",[{key:"id",title:"ID",sorting:"id"},{key:"status",title:"Статус",sorting:"status",getValue:function(e){return Pa(e.status)}},{key:"location",title:"Расположение",getValue:function(e){return e.location?a.a.createElement("div",null,a.a.createElement("div",null,"Город: ",e.location.city.name),a.a.createElement("div",null,"Адрес: ",e.location.address)):"Не указан"}},{key:"contact",title:"Контакт",getValue:function(e){return e.contact?a.a.createElement("div",null,a.a.createElement("div",null,"Имя: ",e.contact.name),a.a.createElement("div",null,"Телефон: ",e.contact.tel)):"Не указан"}},{key:"comment",title:"Комментарий",sorting:"comment"}]),Ba(Wa(r),"actions",[{key:"edit",title:"Редактировать",onClick:function(e){return r.showForm(e)},color:"primary"}]),Ba(Wa(r),"filterControls",[{key:"status",label:"Статус",options:Ea}]),Ba(Wa(r),"handleFiltersChange",(function(e){var t=r.props,n=t.setFilters,a=t.fetchDevices;n(e),a()})),Ba(Wa(r),"setPage",(function(e){var t=r.props.filters;r.handleFiltersChange(Ia({},t,{page:e}))})),Ba(Wa(r),"setLimit",(function(e){var t=r.props.filters;r.handleFiltersChange(Ia({},t,{limit:e,page:1}))})),Ba(Wa(r),"setSorting",(function(e){var t=r.props.filters;r.handleFiltersChange(Ia({},t,{sort_by:e}))})),Ba(Wa(r),"setFilter",(function(e){var t=e.target,n=t.name,a=t.value,o=r.props.filters;r.handleFiltersChange(Ia({},o,Ba({},n,a||null)))})),Ba(Wa(r),"showForm",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=r.props.fetchLocations,n=e.location;if(n){var a=n.city.id;t(a),r.setState((function(t){t.form;return Ia({},_a(t,["form"]),{form:{open:!0,data:e,cityId:a}})}))}else r.setState((function(t){t.form;return Ia({},_a(t,["form"]),{form:{open:!0,data:e,cityId:null}})}))})),Ba(Wa(r),"handleChangeCity",(function(e){var t=e.target,n=r.props.fetchLocations;r.setState((function(e){var r=e.form;return Ia({},_a(e,["form"]),{form:Ia({},r,{cityId:parseInt(t.value,10)||null})})})),n(t.value)})),Ba(Wa(r),"hideForm",(function(){r.setState((function(e){e.form;return Ia({},_a(e,["form"]),{form:{open:!1,data:null,cityId:null}})}))})),Ba(Wa(r),"handleFormSubmit",(function(e){var t=r.state.form.data;(0,r.props.mutateDevices)(Ia({},e,{id:t.id}),r.hideForm)})),Ba(Wa(r),"handleLocationSubmit",(function(e,t){var n=r.state.form.cityId;(0,r.props.mutateLocations)(Ia({},e,{city_id:n}),t)})),r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Aa(e,t)}(t,e),r=t,(n=[{key:"componentDidMount",value:function(){var e=this.props,t=e.fetchDevices;(0,e.setHeader)({title:"Устройства",search:{placeholder:"Поиск по устройствам",onSearch:function(e){(!e||2<e.length)&&t()}}}),t()}},{key:"componentWillUnmount",value:function(){(0,this.props.setHeader)({})}},{key:"render",value:function(){var e=this,t=this.state.form,r=this.props,n=r.classes,o=r.devices,c=r.filters,i=r.total,l=r.cities,u=r.locations;return a.a.createElement(a.a.Fragment,null,t.open&&a.a.createElement(Ra,{data:t.data,citiesData:l,cityId:t.cityId,locationsData:u,handleClose:this.hideForm,handleSubmit:this.handleFormSubmit,handleChangeCity:this.handleChangeCity,handleLocationSubmit:this.handleLocationSubmit}),a.a.createElement("div",{className:n.filters},this.filterControls.map((function(t){return a.a.createElement(dt.a,{key:t.key,select:!0,SelectProps:{displayEmpty:!0},InputLabelProps:{shrink:!0},label:t.label,className:n.filterSelect,name:t.key,onChange:e.setFilter,value:c[t.key]||""},a.a.createElement(xr.a,{value:""},"Все"),t.options.map((function(e){return a.a.createElement(xr.a,{key:e.value,value:e.value},e.label)})))}))),a.a.createElement(Br,{items:o,columns:this.columns,actions:this.actions,sorting:c.sort_by,onSortingChange:this.setSorting,page:c.page,onPageChange:this.setPage,limit:c.limit,onLimitChange:this.setLimit,total:i}))}}])&&Ta(r.prototype,n),o&&Ta(r,o),t}(a.a.Component);Ha.propTypes={devices:at.a.array.isRequired,locations:at.a.array,cities:at.a.array,isLoading:at.a.bool.isRequired,filters:at.a.object.isRequired,total:at.a.number.isRequired,fetchDevices:at.a.func.isRequired,mutateDevices:at.a.func.isRequired,fetchLocations:at.a.func.isRequired,mutateLocations:at.a.func.isRequired,classes:at.a.object.isRequired,setHeader:at.a.func.isRequired};var Va,Ma={fetchDevices:Ae,mutateDevices:function(e,t){return{type:"devices:mutate",payload:e,callback:t}},setFilters:function(e){return{type:"devices:setFilters",filters:e}},setHeader:Pt,fetchLocations:Be,mutateLocations:function(e,t){return{type:"locations:mutate",payload:e,callback:t}}},za=Object(c.b)((function(e){return Ia({},e.devicesReducer)}),Ma)(Object(it.a)((function(e){return{filters:{marginBottom:e.spacing(2),display:"flex",justifyContent:"flex-end","& > *:not(:last-child)":{marginRight:e.spacing(3)}},filterSelect:{minWidth:100}}}))(Ha)),Ka=Object(s.a)(),Ga=Object(u.e)(A,Object(u.a)(Ka));(Va=Ka).run(te),Va.run(me),Va.run(Ce),Va.run(We),Va.run(rt),Object(o.render)(a.a.createElement(c.a,{store:Ga},a.a.createElement(i.a,{basename:"/admin/"},a.a.createElement(Cr,null,a.a.createElement(l.c,null,a.a.createElement(l.a,{path:"/users/",component:Nn,exact:!0}),a.a.createElement(l.a,{path:"/publishers/",component:ta,exact:!0}),a.a.createElement(l.a,{path:"/content/",component:wa,exact:!0}),a.a.createElement(l.a,{path:"/devices/",component:za,exact:!0}))))),document.getElementById("app"))}});